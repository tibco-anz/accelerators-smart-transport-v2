{
    "imports": [
        "github.com/project-flogo/flow",
        "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/activity/log",
        "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/activity/parsejson",
        "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/activity/mapper",
        "github.com/project-flogo/flow/activity/subflow",
        "git.tibco.com/git/product/flogo-messaging.git/Messaging/activity/tcmpublisher",
        "github.com/project-flogo/contrib/activity/actreturn",
        "git.tibco.com/git/product/ipaas/wi-mysql.git/src/app/MySQL/activity/query",
        "emea-swi-svn.emea.tibco.com/svn/Ariel/tci-liveapps/trunk/LiveApps/activity/get",
        "git.tibco.com/git/product/ipaas/wi-mysql.git/src/app/MySQL/activity/update",
        "git.tibco.com/git/product/ipaas/wi-mysql.git/src/app/MySQL/activity/insert",
        "git.tibco.com/git/product/ipaas/wi-mysql.git/src/app/MySQL/activity/delete",
        "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/activity/rest",
        "emea-swi-svn.emea.tibco.com/svn/Ariel/tci-liveapps/trunk/LiveApps/activity/create",
        "rest_1 github.com/project-flogo/contrib/activity/rest",
        "git.tibco.com/git/product/flogo-messaging.git/Messaging/trigger/tcmtrigger",
        "git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/trigger/timer",
        "rest_2 git.tibco.com/git/product/ipaas/wi-contrib.git/contributions/General/trigger/rest",
        "github.com/project-flogo/contrib/function/string",
        "github.com/project-flogo/contrib/function/array",
        "github.com/project-flogo/contrib/function/datetime",
        "github.com/project-flogo/contrib/function/number",
        "github.com/project-flogo/contrib/function/coerce",
        "git.tibco.com/git/product/flogo-messaging.git/Messaging/connector/tcm",
        "git.tibco.com/git/product/ipaas/wi-mysql.git/src/app/MySQL/connector/connection"
    ],
    "name": "mp_PublicTransportAccelerator_LiveAppsCase",
    "description": " ",
    "version": "1.0.0",
    "type": "flogo:app",
    "appModel": "1.1.1",
    "tags": [
        "V2"
    ],
    "triggers": [
        {
            "ref": "#tcmtrigger",
            "name": "tibco-messaging-tcm-trigger",
            "description": "This trigger receives a message from TIBCO Cloud Messaging service",
            "settings": {},
            "id": "MessageSubscriber",
            "handlers": [
                {
                    "description": "This flow will generate new case for incoming event",
                    "settings": {
                        "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                        "durableSub": false,
                        "durableName": "SydneyBuses",
                        "durableType": "Standard",
                        "ackMode": "Auto",
                        "destination": "SydneyBuses_Notification"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:CreateNewCase"
                        },
                        "input": {
                            "message": {
                                "mapping": {
                                    "payload": "=$.message.payload"
                                }
                            }
                        }
                    },
                    "schemas": {
                        "output": {
                            "message": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"payload\":\"\"\n}"
                            }
                        }
                    },
                    "name": "CreateNewCase"
                },
                {
                    "description": "This flow will generate new case for incoming event",
                    "settings": {
                        "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                        "durableSub": false,
                        "durableName": "",
                        "durableType": "Shared",
                        "ackMode": "Auto",
                        "destination": "DeptTransportVictoria_Alert"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:CreateNewAlertForDTVD"
                        },
                        "input": {
                            "message": "=$.message"
                        }
                    },
                    "name": "CreateNewAlertForDTVD"
                }
            ]
        },
        {
            "ref": "#timer",
            "name": "tibco-wi-timer",
            "description": "Simple Timer trigger",
            "settings": {},
            "id": "TimerTrigger",
            "handlers": [
                {
                    "description": "This will check the case state every 30seconds and update it in DB",
                    "settings": {
                        "Repeating": true,
                        "Start Date": "",
                        "Time Interval": 10,
                        "Interval Unit": "Second"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:UpdateCaseState"
                        }
                    },
                    "name": "UpdateCaseState"
                },
                {
                    "description": "This flow will check the status of the case and if its close then it will ask to close the TCE event.",
                    "settings": {
                        "Repeating": true,
                        "Start Date": "",
                        "Time Interval": 5,
                        "Interval Unit": "Second"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:CloseOffTCEEvent"
                        }
                    },
                    "name": "CloseOffTCEEvent"
                },
                {
                    "description": "This will create a steam for ALL incident data (open and closed) for data-steams and publish it over TCM to consume by SpotFire",
                    "settings": {
                        "Repeating": true,
                        "Start Date": "",
                        "Time Interval": 10,
                        "Interval Unit": "Second"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:CreateStreamForIncidentData"
                        }
                    },
                    "name": "CreateStreamForIncidentData"
                },
                {
                    "description": "This will create a steam for ALL incident data (open and closed) for data-steams and publish it over TCM to consume by SpotFire",
                    "settings": {
                        "Repeating": true,
                        "Start Date": "",
                        "Time Interval": 30,
                        "Interval Unit": "Second"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:DTVD_CreateStreamForIncidentData"
                        }
                    },
                    "name": "DTVD_CreateStreamForIncidentData"
                },
                {
                    "description": "This flow will check the status of the case and if its close then it will ask to close the TCE event.",
                    "settings": {
                        "Repeating": true,
                        "Start Date": "",
                        "Time Interval": 15,
                        "Interval Unit": "Second"
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:DTVD_CloseOfTCEEvent"
                        }
                    },
                    "name": "DTVD_CloseOfTCEEvent"
                }
            ]
        },
        {
            "ref": "#rest_2",
            "name": "tibco-wi-rest",
            "description": "Simple REST Trigger",
            "settings": {
                "port": 9999,
                "APISpecUpdate": false,
                "swagger": "",
                "swaggerVersion": "v2",
                "secureConnection": false,
                "serverKey": "",
                "caCertificate": ""
            },
            "id": "ReceiveHTTPMessage",
            "handlers": [
                {
                    "description": "This will assign the resource for INCIDENT based on area or location",
                    "settings": {
                        "Method": "GET",
                        "Path": "/case/resource_assignmet/v1",
                        "OutputValidation": false
                    },
                    "action": {
                        "ref": "github.com/project-flogo/flow",
                        "settings": {
                            "flowURI": "res://flow:SetResourceForLACaseProcessing"
                        },
                        "input": {
                            "headers": "=$.headers",
                            "queryParams": {
                                "mapping": {
                                    "location": "=$.queryParams.location"
                                }
                            }
                        },
                        "output": {
                            "code": "=$.code",
                            "data": {
                                "mapping": {
                                    "resourceName": "=$.data.resourceName"
                                }
                            }
                        }
                    },
                    "reply": {
                        "code": 200,
                        "configureResponseCodes": false,
                        "message": {}
                    },
                    "schemas": {
                        "reply": {
                            "data": {
                                "type": "json",
                                "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"resourceName\":{\"type\":\"string\"}}}",
                                "fe_metadata": "{\n    \"resourceName\":\"\"\n}"
                            },
                            "responseBody": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"body\":{\"type\":\"any\"},\"headers\":{\"type\":\"object\"}}}",
                                "fe_metadata": "{\"type\":\"object\",\"properties\":{\"body\":{\"type\":\"any\"},\"headers\":{\"type\":\"object\"}}}"
                            }
                        },
                        "output": {
                            "queryParams": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"location\":{\"type\":\"string\"}},\"required\":[\"location\"]}",
                                "fe_metadata": "[{\"parameterName\":\"location\",\"type\":\"string\",\"repeating\":\"\",\"required\":\"true\"}]"
                            },
                            "headers": {
                                "type": "json",
                                "value": "{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[]}",
                                "fe_metadata": "[{\"parameterName\":\"Accept\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Charset\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Encoding\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Type\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Length\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Connection\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Cookie\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Pragma\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false}]"
                            }
                        }
                    },
                    "name": "SetResourceForLACaseProcessing"
                }
            ]
        }
    ],
    "resources": [
        {
            "id": "flow:CreateNewCase",
            "data": {
                "name": "CreateNewCase",
                "description": "This flow will generate new case for incoming event",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "ParseJSONActivity",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "ParseJSONActivity",
                        "to": "CreateCaseStructure",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "CreateCaseStructure",
                        "to": "snedNotify",
                        "type": "expression",
                        "label": "IfAccident",
                        "value": "$activity[CreateCaseStructure].output.notification.cause==\"Alert_ACCIDENT\""
                    },
                    {
                        "id": 4,
                        "from": "snedNotify",
                        "to": "CreateAccidentCase",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "CreateAccidentCase",
                        "to": "TCMMessagePublisher",
                        "type": "default"
                    },
                    {
                        "id": 6,
                        "from": "CreateCaseStructure",
                        "to": "Notification",
                        "type": "expression",
                        "label": "IfTechProblem",
                        "value": "$activity[CreateCaseStructure].output.notification.cause==\"Alert_TECHNICAL_PROBLEM\""
                    },
                    {
                        "id": 7,
                        "from": "Notification",
                        "to": "CreateCaseTechProblem",
                        "type": "default"
                    },
                    {
                        "id": 8,
                        "from": "CreateCaseTechProblem",
                        "to": "sendCaseResponse",
                        "type": "default"
                    },
                    {
                        "id": 9,
                        "from": "CreateCaseStructure",
                        "to": "NotifySend",
                        "type": "expression",
                        "label": "IfMedEmergency",
                        "value": "$activity[CreateCaseStructure].output.notification.cause == \"Alert_MEDICAL_EMERGENCY\""
                    },
                    {
                        "id": 10,
                        "from": "NotifySend",
                        "to": "CreateMedEmergencyCase",
                        "type": "default"
                    },
                    {
                        "id": 11,
                        "from": "CreateMedEmergencyCase",
                        "to": "CopyOfCopyOfTCMMessagePublisher",
                        "type": "default"
                    },
                    {
                        "id": 12,
                        "from": "CreateCaseStructure",
                        "to": "LogMessage2",
                        "type": "exprOtherwise",
                        "label": "CreateCaseStructure to LogMessage2"
                    },
                    {
                        "id": 13,
                        "from": "LogMessage2",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"Incoming Alert Notification : -> \",string.tostring($flow.message))"
                            }
                        }
                    },
                    {
                        "id": "ParseJSONActivity",
                        "name": "ParseJSONActivity",
                        "description": "Parses JSON string into JSON object",
                        "activity": {
                            "ref": "#parsejson",
                            "input": {
                                "validate": false,
                                "jsonString": "=$flow.message.payload"
                            },
                            "schemas": {
                                "output": {
                                    "jsonObject": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}},\"position\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"}}}}}}}",
                                        "fe_metadata": "{\n    \"notification\":{\n        \"alert_id\":\"\",\n        \"cause\":\"\",\n        \"effect\":\"\",\n        \"severity_level\":\"\",\n        \"start_time\":\"\",\n        \"header\":\"\",\n        \"description\":\"\",\n        \"url\":\"\",\n        \"informed_entity\":{\n            \"agencyId\":\"\",\n            \"routeId\":\"\",\n            \"stopId\":\"\"\n        },\n        \"position\":{\n            \"latitude\":1,\n            \"longitude\":1\n        }\n    }\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CreateCaseStructure",
                        "name": "CreateCaseStructure",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "notification": {
                                            "alert_id": "=$activity[ParseJSONActivity].jsonObject.notification.alert_id",
                                            "cause": "=$activity[ParseJSONActivity].jsonObject.notification.cause",
                                            "effect": "=$activity[ParseJSONActivity].jsonObject.notification.effect",
                                            "severity_level": "=$activity[ParseJSONActivity].jsonObject.notification.severity_level",
                                            "start_time": "=$activity[ParseJSONActivity].jsonObject.notification.start_time",
                                            "header": "=$activity[ParseJSONActivity].jsonObject.notification.header",
                                            "description": "=$activity[ParseJSONActivity].jsonObject.notification.description",
                                            "url": "=$activity[ParseJSONActivity].jsonObject.notification.url",
                                            "informed_entity": {
                                                "agencyId": "=$activity[ParseJSONActivity].jsonObject.notification.informed_entity.agencyId",
                                                "routeId": "=$activity[ParseJSONActivity].jsonObject.notification.informed_entity.routeId",
                                                "stopId": "=$activity[ParseJSONActivity].jsonObject.notification.informed_entity.stopId"
                                            },
                                            "position": {
                                                "latitude": "=$activity[ParseJSONActivity].jsonObject.notification.position.latitude",
                                                "longitude": "=$activity[ParseJSONActivity].jsonObject.notification.position.longitude"
                                            }
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}},\"position\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"}}}}}}}",
                                        "fe_metadata": "{\n    \"notification\":{\n        \"alert_id\":\"\",\n        \"cause\":\"\",\n        \"effect\":\"\",\n        \"severity_level\":\"\",\n        \"start_time\":\"\",\n        \"header\":\"\",\n        \"description\":\"\",\n        \"url\":\"\",\n        \"informed_entity\":{\n            \"agencyId\":\"\",\n            \"routeId\":\"\",\n            \"stopId\":\"\"\n        },\n        \"position\":{\n            \"latitude\":1,\n            \"longitude\":1\n        }\n    }\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}},\"position\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"}}}}}}}",
                                        "fe_metadata": "{\n  \"notification\": {\n    \"alert_id\": \"\",\n    \"cause\": \"\",\n    \"effect\": \"\",\n    \"severity_level\": \"\",\n    \"start_time\": \"\",\n    \"header\": \"\",\n    \"description\": \"\",\n    \"url\": \"\",\n    \"informed_entity\": {\n      \"agencyId\": \"\",\n      \"routeId\": \"\",\n      \"stopId\": \"\"\n    },\n    \"position\": {\n      \"latitude\": 1,\n      \"longitude\": 1\n    }\n  }\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "snedNotify",
                        "name": "snedNotify",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:SendNotifications"
                            },
                            "input": {
                                "notification": "=$activity[CreateCaseStructure].output.notification"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CreateAccidentCase",
                        "name": "CreateAccidentCase",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:CreateCase"
                            },
                            "input": {
                                "notification": "=$activity[CreateCaseStructure].output.notification"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "TCMMessagePublisher",
                        "name": "TCMMessagePublisher",
                        "description": "This activity sends a message to TIBCO Cloud Messaging service",
                        "settings": {
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#tcmpublisher",
                            "input": {
                                "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                                "destination": "=$property[\"TCM_Destinations._caseCreated\"]",
                                "url": "",
                                "authKey": "",
                                "message": {
                                    "mapping": {
                                        "payload": "=string.tostring($activity[CreateAccidentCase].payload)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "message": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"payload\":  \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Notification",
                        "name": "Notification",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:SendNotifications"
                            },
                            "input": {
                                "notification": "=$activity[CreateCaseStructure].output.notification"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CreateCaseTechProblem",
                        "name": "CreateCaseTechProblem",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:CreateCase"
                            },
                            "input": {
                                "notification": "=$activity[CreateCaseStructure].output.notification"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "sendCaseResponse",
                        "name": "sendCaseResponse",
                        "description": "This activity sends a message to TIBCO Cloud Messaging service",
                        "settings": {
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#tcmpublisher",
                            "input": {
                                "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                                "destination": "=$property[\"TCM_Destinations._caseCreated\"]",
                                "url": "",
                                "authKey": "",
                                "message": {
                                    "mapping": {
                                        "payload": "=string.tostring($activity[CreateCaseTechProblem].payload)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "message": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"payload\":  \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "NotifySend",
                        "name": "NotifySend",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:SendNotifications"
                            },
                            "input": {
                                "notification": "=$activity[CreateCaseStructure].output.notification"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CreateMedEmergencyCase",
                        "name": "CreateMedEmergencyCase",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:CreateCase"
                            },
                            "input": {
                                "notification": "=$activity[CreateCaseStructure].output.notification"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}}}}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CopyOfCopyOfTCMMessagePublisher",
                        "name": "CopyOfCopyOfTCMMessagePublisher",
                        "description": "This activity sends a message to TIBCO Cloud Messaging service",
                        "settings": {
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#tcmpublisher",
                            "input": {
                                "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                                "destination": "=$property[\"TCM_Destinations._caseCreated\"]",
                                "url": "",
                                "authKey": "",
                                "message": {
                                    "mapping": {
                                        "payload": "=string.tostring($activity[CreateMedEmergencyCase].payload)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "message": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"payload\":  \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage2",
                        "name": "LogMessage2",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": " ###### NO SUITABLE FLOW AVAILABLE #####"
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "Simple Return Activity",
                        "activity": {
                            "ref": "#actreturn"
                        }
                    }
                ],
                "errorHandler": {
                    "tasks": [
                        {
                            "id": "LogMessage1",
                            "name": "LogMessage1",
                            "description": "Simple Log Message Activity",
                            "activity": {
                                "ref": "#log",
                                "input": {
                                    "Log Level": "INFO",
                                    "flowInfo": false,
                                    "message": "=string.concat($error.activity, \" - \",$error.message, \" - \", $error.data)"
                                }
                            }
                        }
                    ],
                    "links": []
                },
                "metadata": {
                    "input": [
                        {
                            "name": "message",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"payload\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "output": [],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"MessageSubscriber\",\"properties\":{\"message\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}}}"
                    }
                }
            }
        },
        {
            "id": "flow:UpdateCaseState",
            "data": {
                "name": "UpdateCaseState",
                "description": "This will check the case state every 30seconds and update it in DB",
                "links": [
                    {
                        "id": 1,
                        "from": "MySQLQuery",
                        "to": "MySQLQuery1",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "MySQLQuery1",
                        "to": "CopyOfLiveAppsGetCase",
                        "type": "expression",
                        "label": "MySQLQuery1 to CopyOfLiveAppsGetCase",
                        "value": "array.count($activity[MySQLQuery1].Output.records)>0"
                    },
                    {
                        "id": 3,
                        "from": "CopyOfLiveAppsGetCase",
                        "to": "CopyOfMySQLUpdate",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "CopyOfMySQLUpdate",
                        "to": "CopyOfLogMessage",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "CopyOfLiveAppsGetCase",
                        "to": "LogMessage1",
                        "type": "error",
                        "label": "CopyOfLiveAppsGetCase to LogMessage1"
                    },
                    {
                        "id": 6,
                        "from": "MySQLQuery",
                        "to": "LiveAppsGetCase",
                        "type": "expression",
                        "label": "MySQLQuerytoLiveAppsGetCase",
                        "value": "array.count($activity[MySQLQuery].Output.records)>0"
                    },
                    {
                        "id": 7,
                        "from": "LiveAppsGetCase",
                        "to": "MySQLUpdate",
                        "type": "default"
                    },
                    {
                        "id": 8,
                        "from": "MySQLUpdate",
                        "to": "LogMessage",
                        "type": "default"
                    },
                    {
                        "id": 9,
                        "from": "MySQLQuery",
                        "to": "NoCasesInDB",
                        "type": "exprOtherwise",
                        "label": "MySQLQuery to LogMessage1"
                    }
                ],
                "tasks": [
                    {
                        "id": "MySQLQuery",
                        "name": "MySQLQuery",
                        "description": "This activity executes query on a MySQL database",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "QueryName": "",
                                "Query": "select  * from gtfscontroldb.gtfs_alertcasetracking;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "state",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    }
                                ],
                                "State": "b8556ed2-1964-4d3b-bd58-835531a9cbdfselect  * from gtfscontroldb.gtfs_alertcasetracking;"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"}}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "MySQLQuery1",
                        "name": "MySQLQuery1",
                        "description": "This activity executes query on a MySQL database",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "QueryName": "",
                                "Query": "select  * from gtfscontroldb.dtvd_alertcasetracking;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "avg_speed",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "class_name",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "image",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    }
                                ],
                                "State": "696d880f-8f76-4886-813c-970a6ddc9c34select  * from gtfscontroldb.dtvd_alertcasetracking;"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CopyOfLiveAppsGetCase",
                        "name": "CopyOfLiveAppsGetCase",
                        "description": "Live Apps Get Case",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[MySQLQuery1].Output.records",
                            "accumulate": true
                        },
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "applicationId": "4941",
                                "sandboxId": "6440",
                                "caseRef": "=$iteration[value].caseRef"
                            },
                            "schemas": {
                                "output": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"State\":{\"type\":\"string\",\"title\":\"State\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"2\",\"internalName\":\"state\"},\"enum\":[\"Reported\",\"Open\",\"Resolved\",\"Close\"]},\"IncidentID\":{\"type\":\"integer\",\"title\":\"Incident ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"IncidentID\",\"isSummary\":true}},\"AverageSpeedofVehicle\":{\"type\":\"integer\",\"title\":\"Average Speed of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AverageSpeedofVehicle\",\"isSummary\":true}},\"DirectionOfVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Direction Of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"DirectionOfVehicle\"}},\"ImageOfconcernVehicle\":{\"type\":\"object\",\"title\":\"Image Of concern Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"ImageOfconcernVehicle\"},\"properties\":{\"linkText\":{\"type\":\"string\",\"title\":\"Link Text\"},\"address\":{\"type\":\"string\",\"title\":\"Address\"}},\"required\":[\"address\"]},\"TypeofVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Type of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"30\",\"internalName\":\"TypeofVehicle\"}},\"AssignToResource\":{\"type\":\"string\",\"maxLength\":100,\"title\":\"AssignToResource\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"27\",\"internalName\":\"AssignToResource\",\"isSummary\":true}},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"DateLastUpdated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Last Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"9\",\"internalName\":\"DateLastUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeLastUpdated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Last Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"20\",\"internalName\":\"TimeLastUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"ResolutionSummary\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Resolution Summary\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"21\",\"internalName\":\"ResolutionSummary\"}},\"NotesOfIncident\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Notes Of Incident\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"22\",\"internalName\":\"NotesOfIncident\"}}},\"required\":[\"State\"]}",
                                        "fe_metadata": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"State\":{\"type\":\"string\",\"title\":\"State\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"2\",\"internalName\":\"state\"},\"enum\":[\"Reported\",\"Open\",\"Resolved\",\"Close\"]},\"IncidentID\":{\"type\":\"integer\",\"title\":\"Incident ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"IncidentID\",\"isSummary\":true}},\"AverageSpeedofVehicle\":{\"type\":\"integer\",\"title\":\"Average Speed of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AverageSpeedofVehicle\",\"isSummary\":true}},\"DirectionOfVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Direction Of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"DirectionOfVehicle\"}},\"ImageOfconcernVehicle\":{\"type\":\"object\",\"title\":\"Image Of concern Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"ImageOfconcernVehicle\"},\"properties\":{\"linkText\":{\"type\":\"string\",\"title\":\"Link Text\"},\"address\":{\"type\":\"string\",\"title\":\"Address\"}},\"required\":[\"address\"]},\"TypeofVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Type of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"30\",\"internalName\":\"TypeofVehicle\"}},\"AssignToResource\":{\"type\":\"string\",\"maxLength\":100,\"title\":\"AssignToResource\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"27\",\"internalName\":\"AssignToResource\",\"isSummary\":true}},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"DateLastUpdated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Last Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"9\",\"internalName\":\"DateLastUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeLastUpdated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Last Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"20\",\"internalName\":\"TimeLastUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"ResolutionSummary\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Resolution Summary\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"21\",\"internalName\":\"ResolutionSummary\"}},\"NotesOfIncident\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Notes Of Incident\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"22\",\"internalName\":\"NotesOfIncident\"}}},\"required\":[\"State\"]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CopyOfMySQLUpdate",
                        "name": "CopyOfMySQLUpdate",
                        "description": "This activity executes update on a MySQL database",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[CopyOfLiveAppsGetCase]",
                            "accumulate": false
                        },
                        "activity": {
                            "ref": "#update",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "UpdateStatement": "UPDATE gtfscontroldb.dtvd_alertcasetracking SET case_state=?case_state where alert_id=?alert_id;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false
                                    }
                                ],
                                "State": "ca1ef1c9-b1eb-48ad-a5a6-524626f66504UPDATE gtfscontroldb.dtvd_alertcasetracking SET case_state=?case_state where alert_id=?alert_id;",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "case_state": "=$iteration[value].data.State",
                                            "alert_id": "=string.tostring($iteration[value].data.IncidentID)"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"case_state\":{\"type\":\"string\"},\"alert_id\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"case_state\":{\"type\":\"string\"},\"alert_id\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CopyOfLogMessage",
                        "name": "CopyOfLogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"####### TOTAL CASES UPDATED : \", string.tostring($activity[CopyOfMySQLUpdate].Output.rowsAffected))"
                            }
                        }
                    },
                    {
                        "id": "LogMessage1",
                        "name": "LogMessage1",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "##### NOT FOUND #####"
                            }
                        }
                    },
                    {
                        "id": "LiveAppsGetCase",
                        "name": "LiveAppsGetCase",
                        "description": "Live Apps Get Case",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[MySQLQuery].Output.records",
                            "accumulate": true
                        },
                        "activity": {
                            "ref": "#get",
                            "input": {
                                "applicationId": "4785",
                                "sandboxId": "6440",
                                "caseRef": "=$iteration[value].caseRef"
                            },
                            "schemas": {
                                "output": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"State\":{\"type\":\"string\",\"title\":\"State\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"2\",\"internalName\":\"state\"},\"enum\":[\"Reported\",\"Open\",\"Resolved\",\"Close\"]},\"AlertID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"AlertID\",\"isSummary\":true}},\"AlertType\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert Type\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AlertType\",\"isSummary\":true}},\"Description\":{\"type\":\"string\",\"maxLength\":250,\"title\":\"Description\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"Description\"}},\"Severity\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Severity\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"Severity\",\"isSummary\":true}},\"AssignToResource\":{\"type\":\"string\",\"maxLength\":100,\"title\":\"AssignToResource\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"27\",\"internalName\":\"AssignToResource\"}},\"AffectedParties\":{\"type\":\"object\",\"properties\":{\"AgencyID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Agency ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"11\",\"internalName\":\"AgencyID\"}},\"RouteID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Route ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"14\",\"internalName\":\"RouteID\"}},\"StopID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Stop ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"15\",\"internalName\":\"StopID\"}}}},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"DateUpdated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"9\",\"internalName\":\"DateUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeUpdated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"20\",\"internalName\":\"TimeUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"ResolutionSummary\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Resolution Summary\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"21\",\"internalName\":\"ResolutionSummary\"}},\"Notes\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Notes\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"22\",\"internalName\":\"Notes\"}},\"IncidentLocation\":{\"type\":\"string\",\"maxLength\":500,\"title\":\"IncidentLocation\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"28\",\"internalName\":\"IncidentLocation\"}}},\"required\":[\"State\"]}",
                                        "fe_metadata": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"State\":{\"type\":\"string\",\"title\":\"State\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"2\",\"internalName\":\"state\"},\"enum\":[\"Reported\",\"Open\",\"Resolved\",\"Close\"]},\"AlertID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"AlertID\",\"isSummary\":true}},\"AlertType\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert Type\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AlertType\",\"isSummary\":true}},\"Description\":{\"type\":\"string\",\"maxLength\":250,\"title\":\"Description\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"Description\"}},\"Severity\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Severity\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"Severity\",\"isSummary\":true}},\"AssignToResource\":{\"type\":\"string\",\"maxLength\":100,\"title\":\"AssignToResource\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"27\",\"internalName\":\"AssignToResource\"}},\"AffectedParties\":{\"type\":\"object\",\"properties\":{\"AgencyID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Agency ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"11\",\"internalName\":\"AgencyID\"}},\"RouteID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Route ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"14\",\"internalName\":\"RouteID\"}},\"StopID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Stop ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"15\",\"internalName\":\"StopID\"}}}},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"DateUpdated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"9\",\"internalName\":\"DateUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeUpdated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Updated\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"20\",\"internalName\":\"TimeUpdated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"ResolutionSummary\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Resolution Summary\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"21\",\"internalName\":\"ResolutionSummary\"}},\"Notes\":{\"type\":\"string\",\"maxLength\":5000,\"title\":\"Notes\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"22\",\"internalName\":\"Notes\"}},\"IncidentLocation\":{\"type\":\"string\",\"maxLength\":500,\"title\":\"IncidentLocation\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"28\",\"internalName\":\"IncidentLocation\"}}},\"required\":[\"State\"]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "MySQLUpdate",
                        "name": "MySQLUpdate",
                        "description": "This activity executes update on a MySQL database",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[LiveAppsGetCase]",
                            "accumulate": false
                        },
                        "activity": {
                            "ref": "#update",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "UpdateStatement": "UPDATE gtfscontroldb.gtfs_alertcasetracking SET alert_type = ?alert_type, case_state=?case_state where alert_id=?alert_id;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_type",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false
                                    }
                                ],
                                "State": "ab1c412b-071d-45b6-ab1d-869474f2718f    UPDATE gtfscontroldb.gtfs_alertcasetracking SET alert_type = ?alert_type, case_state=?case_state where alert_id=?alert_id;",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "alert_id": "=$iteration[value].data.AlertID",
                                            "case_state": "=$iteration[value].data.State",
                                            "alert_type": "=$iteration[value].data.AlertType"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_type\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"alert_id\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_type\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"alert_id\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"####### TOTAL CASES UPDATED : \", string.tostring($activity[MySQLUpdate].Output.rowsAffected))"
                            }
                        }
                    },
                    {
                        "id": "NoCasesInDB",
                        "name": "NoCasesInDB",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "###### NO CASES IN STORE ######"
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [],
                    "output": [],
                    "fe_metadata": {}
                }
            }
        },
        {
            "id": "flow:CloseOffTCEEvent",
            "data": {
                "name": "CloseOffTCEEvent",
                "description": "This flow will check the status of the case and if its close then it will ask to close the TCE event.",
                "links": [
                    {
                        "id": 1,
                        "from": "MySQLQuery",
                        "to": "AllCasesInCloseState",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "AllCasesInCloseState",
                        "to": "ConstructDataForTCEEvent",
                        "type": "expression",
                        "label": "CasesInCloseStatetoTCMMessageAck",
                        "value": "array.count($activity[AllCasesInCloseState].output[\"case\"])>0"
                    },
                    {
                        "id": 3,
                        "from": "ConstructDataForTCEEvent",
                        "to": "TCMMessagePublisher",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "TCMMessagePublisher",
                        "to": "MySQLInsert",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "MySQLInsert",
                        "to": "MySQLDelete",
                        "type": "default"
                    },
                    {
                        "id": 6,
                        "from": "MySQLDelete",
                        "to": "TCEEventAck",
                        "type": "default"
                    },
                    {
                        "id": 7,
                        "from": "AllCasesInCloseState",
                        "to": "NothingToAck",
                        "type": "expression",
                        "label": "CasesInCloseStatetoNothingToAck",
                        "value": "array.count($activity[AllCasesInCloseState].output[\"case\"])==0"
                    }
                ],
                "tasks": [
                    {
                        "id": "MySQLQuery",
                        "name": "MySQLQuery",
                        "description": "This activity executes query on a MySQL database",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "QueryName": "",
                                "Query": "select * from  gtfscontroldb.gtfs_alertcasetracking where case_state='Close';",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "alert_type",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "latitude",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "longitude",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "incident_url",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "location",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    }
                                ],
                                "State": "202b882e-aaa4-4622-bfaf-7d5c60d90c76select * from  gtfscontroldb.gtfs_alertcasetracking where case_state='Close';"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"}}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "AllCasesInCloseState",
                        "name": "AllCasesInCloseState",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "case": {
                                            "@foreach($activity[MySQLQuery].Output.records, case)": {
                                                "alert_id": "=$loop.alert_id",
                                                "caseRef": "=$loop.caseRef",
                                                "state": "=$loop.case_state",
                                                "end_time": "=$loop.end_time"
                                            }
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"case\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\n    \"case\":[{\n    \"alert_id\":\"\",\n    \"caseRef\":\"\",\n    \"state\":\"\",\n    \"end_time\":\"\"\n    }]\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"case\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\n  \"case\": [\n    {\n      \"alert_id\": \"\",\n      \"caseRef\": \"\",\n      \"state\": \"\",\n      \"end_time\": \"\"\n    }\n  ]\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "ConstructDataForTCEEvent",
                        "name": "ConstructDataForTCEEvent",
                        "description": "Mapper Activity",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[AllCasesInCloseState].output[\"case\"]",
                            "accumulate": true
                        },
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "alert_id": "=$iteration[value].alert_id",
                                        "caseRef": "=$iteration[value].caseRef",
                                        "status": "=$iteration[value].state",
                                        "end_time": "=$iteration[value].end_time"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"alert_id\": \"\",\n\t\"caseRef\":\"\",\n\t\"end_time\": \"\",\n\t\"status\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"alert_id\": \"\",\n  \"caseRef\": \"\",\n  \"end_time\": \"\",\n  \"status\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "TCMMessagePublisher",
                        "name": "TCMMessagePublisher",
                        "description": "This activity sends a message to TIBCO Cloud Messaging service",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[ConstructDataForTCEEvent]",
                            "accumulate": false,
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#tcmpublisher",
                            "input": {
                                "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                                "destination": "=$property[\"TCM_Destinations._caseCreated\"]",
                                "url": "",
                                "authKey": "",
                                "message": {
                                    "mapping": {
                                        "payload": "=string.tostring($iteration[value].output)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "message": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"payload\":  \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "MySQLInsert",
                        "name": "MySQLInsert",
                        "description": "This activity executes insert on a MySQL database",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[MySQLQuery].Output.records",
                            "accumulate": false
                        },
                        "activity": {
                            "ref": "#insert",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "InsertStatement": "INSERT INTO gtfscontroldb.gtfs_incidenthistory (alert_id, alert_type, caseRef, case_url, end_time, start_time, case_state, incident_url, location) VALUES(?alert_id, ?alert_type, ?caseRef, ?case_url, ?end_time, ?start_time, ?case_state, ?incident_url, ?location);",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "alert_type",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "incident_url",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "location",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    }
                                ],
                                "State": "194ff290-8f9d-4c5e-bdba-bcaf3fc66fdaINSERT INTO gtfscontroldb.gtfs_incidenthistory (alert_id, alert_type, caseRef, case_url, end_time, start_time, case_state, incident_url, location) VALUES(?alert_id, ?alert_type, ?caseRef, ?case_url, ?end_time, ?start_time, ?case_state, ?incident_url, ?location);",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "alert_id": "=$iteration[value].alert_id",
                                            "caseRef": "=$iteration[value].caseRef",
                                            "case_url": "=$iteration[value].case_url",
                                            "start_time": "=$iteration[value].start_time",
                                            "case_state": "=$iteration[value].case_state",
                                            "incident_url": "=$iteration[value].incident_url",
                                            "location": "=$iteration[value].location",
                                            "end_time": "=string.tostring(number.int64(datetime.diff('1970-01-01T00:00:00Z', datetime.current(), 'seconds')))",
                                            "alert_type": "=$iteration[value].alert_type"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "MySQLDelete",
                        "name": "MySQLDelete",
                        "description": "This activity executes delete on a MySQL database",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[ConstructDataForTCEEvent]",
                            "accumulate": false
                        },
                        "activity": {
                            "ref": "#delete",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "DeleteStatement": "DELETE FROM gtfscontroldb.gtfs_alertcasetracking WHERE caseRef=?caseRef;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false
                                    }
                                ],
                                "State": "a33abd7e-462b-48f4-90db-6b5dca76d9e5DELETE FROM gtfscontroldb.gtfs_alertcasetracking WHERE caseRef=?caseRef;",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "caseRef": "=$iteration[value].output.caseRef"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"caseRef\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"caseRef\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "TCEEventAck",
                        "name": "TCEEventAck",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"##### TOTAL ALERT'S CLOSED  :\", string.tostring(array.count($activity[AllCasesInCloseState].output[\"case\"])))"
                            }
                        }
                    },
                    {
                        "id": "NothingToAck",
                        "name": "NothingToAck",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "####### NO ALERT CASE IN CLOSE STATW #######"
                            }
                        }
                    }
                ],
                "errorHandler": {
                    "tasks": [
                        {
                            "id": "LogMessage",
                            "name": "LogMessage",
                            "description": "Simple Log Message Activity",
                            "activity": {
                                "ref": "#log",
                                "input": {
                                    "Log Level": "INFO",
                                    "flowInfo": false,
                                    "message": "=string.concat($error.activity,\" - \",$error.message, \" - \", $error.data)"
                                }
                            }
                        }
                    ],
                    "links": []
                },
                "metadata": {
                    "input": [],
                    "output": [],
                    "fe_metadata": {}
                }
            }
        },
        {
            "id": "flow:CreateCase",
            "data": {
                "name": "CreateCase",
                "description": "This subflow will create the LA CASE and update it in DB",
                "links": [
                    {
                        "id": 1,
                        "from": "LogIncomingAlert",
                        "to": "InvokeRESTService",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "InvokeRESTService",
                        "to": "LiveAppsCreateCase",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "LiveAppsCreateCase",
                        "to": "CreateCaseInDB",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "CreateCaseInDB",
                        "to": "Print_CaseCreatedID",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "Print_CaseCreatedID",
                        "to": "ConstructResponseToTCE",
                        "type": "default"
                    },
                    {
                        "id": 6,
                        "from": "ConstructResponseToTCE",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogIncomingAlert",
                        "name": "LogIncomingAlert",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"##### CREATING NEW CASE FOR ALERT ID :\",$flow.notification.alert_id, \"#######\")"
                            }
                        }
                    },
                    {
                        "id": "InvokeRESTService",
                        "name": "InvokeRESTService",
                        "description": "Simple REST Activity",
                        "settings": {
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#rest",
                            "input": {
                                "enableASR": false,
                                "swagger": "",
                                "serviceName": "",
                                "resourcePath": "",
                                "Method": "GET",
                                "Uri": "http://api.positionstack.com/v1/reverse",
                                "Timeout": 0,
                                "requestType": "application/json",
                                "Use certificate for verification": false,
                                "Server Certificate": "",
                                "proxy": "",
                                "host": "",
                                "headers": {
                                    "mapping": {
                                        "access_key": "9aea640df117cc9a1de866a788e958d5"
                                    }
                                },
                                "queryParams": {
                                    "mapping": {
                                        "access_key": "9aea640df117cc9a1de866a788e958d5",
                                        "query": "=string.concat(string.tostring($flow.notification.position.latitude), \",\", string.tostring($flow.notification.position.longitude))"
                                    }
                                }
                            },
                            "output": {
                                "configureResponseCodes": false,
                                "responseType": "application/json"
                            },
                            "schemas": {
                                "input": {
                                    "queryParams": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"access_key\":{\"type\":\"string\"},\"query\":{\"type\":\"string\"}},\"required\":[\"query\"]}",
                                        "fe_metadata": "[{\"parameterName\":\"access_key\",\"type\":\"string\",\"repeating\":\"\",\"required\":\"\"},{\"parameterName\":\"query\",\"type\":\"string\",\"repeating\":\"\",\"required\":\"true\"}]"
                                    },
                                    "headers": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"access_key\":{\"type\":\"string\"},\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[\"access_key\"]}",
                                        "fe_metadata": "[{\"parameterName\":\"access_key\",\"type\":\"string\",\"repeating\":\"\",\"required\":\"true\"},{\"parameterName\":\"Accept\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Charset\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Encoding\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Type\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Length\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Connection\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Cookie\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Pragma\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false}]"
                                    }
                                },
                                "output": {
                                    "responseBody": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"},\"name\":{\"type\":\"string\"},\"number\":{\"type\":\"string\"},\"postal_code\":{\"type\":\"string\"},\"street\":{\"type\":\"string\"},\"confidence\":{\"type\":\"number\"},\"region\":{\"type\":\"string\"},\"region_code\":{\"type\":\"string\"},\"county\":{\"type\":\"string\"},\"locality\":{\"type\":\"string\"},\"administrative_area\":{\"type\":\"string\"},\"neighbourhood\":{\"type\":\"null\"},\"country\":{\"type\":\"string\"},\"country_code\":{\"type\":\"string\"},\"continent\":{\"type\":\"string\"},\"label\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": " {\n    \"data\": [{\n        \"latitude\": -33.910687,\n            \"longitude\": 151.216731,\n        \"name\": \"Coles Express\",\n            \"number\": \"4\",\n            \"postal_code\": \"2153\",\n            \"street\": \"Century Circuit\",\n            \"confidence\": 0.8,\n            \"region\": \"New South Wales\",\n            \"region_code\": \"NSW\",\n            \"county\": \"The Hills Shire\",\n            \"locality\": \"Baulkham Hills\",\n            \"administrative_area\": \"Baulkham Hills\",\n            \"neighbourhood\": null,\n            \"country\": \"Australia\",\n            \"country_code\": \"AUS\",\n            \"continent\": \"Oceania\",\n            \"label\": \"Coles Express, Baulkham Hills, NSW, Australia\"\n    }\n      ]\n}"
                                    },
                                    "headers": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"Accept\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Charset\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Encoding\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Type\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Length\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Connection\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Cookie\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Pragma\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false}]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LiveAppsCreateCase",
                        "name": "LiveAppsCreateCase",
                        "description": "Live Apps Create Case",
                        "activity": {
                            "ref": "#create",
                            "input": {
                                "applicationId": "4785",
                                "artifactId": "26558",
                                "sandboxId": "6440",
                                "processName": "CreateAlert",
                                "data": {
                                    "mapping": {
                                        "AlertProcessing": {
                                            "AlertID": "=$flow.notification.alert_id",
                                            "AlertType": "=$flow.notification.cause",
                                            "Description": "=$flow.notification.description",
                                            "Severity": "=$flow.notification.severity_level",
                                            "AffectedParties": {
                                                "AgencyID": "=$flow.notification.informed_entity.agencyId",
                                                "RouteID": "=$flow.notification.informed_entity.routeId",
                                                "StopID": "=$flow.notification.informed_entity.stopId"
                                            },
                                            "DateCreated": "=datetime.formatDate(datetime.format(string.integer($flow.notification.start_time)*1000, \"yyyy-MM-dd HH:mm:ss\"),\"yyyy-MM-dd\")",
                                            "TimeCreated": "=datetime.formatTime(datetime.format(string.integer($flow.notification.start_time)*1000, \"yyyy-MM-dd HH:mm:ss\"),\"hh:mm\")",
                                            "IncidentLocation": "=$activity[InvokeRESTService].responseBody.data[0].label"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"AlertProcessing\":{\"type\":\"object\",\"properties\":{\"AlertID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"AlertID\",\"isSummary\":true}},\"AlertType\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert Type\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AlertType\",\"isSummary\":true}},\"IncidentLocation\":{\"type\":\"string\",\"maxLength\":500,\"title\":\"IncidentLocation\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"28\",\"internalName\":\"IncidentLocation\"}},\"Description\":{\"type\":\"string\",\"maxLength\":250,\"title\":\"Description\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"Description\"}},\"Severity\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Severity\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"Severity\",\"isSummary\":true}},\"AffectedParties\":{\"type\":\"object\",\"properties\":{\"AgencyID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Agency ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"11\",\"internalName\":\"AgencyID\"}},\"RouteID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Route ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"14\",\"internalName\":\"RouteID\"}},\"StopID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Stop ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"15\",\"internalName\":\"StopID\"}}}},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}}},\"required\":[\"IncidentLocation\"]}},\"required\":[\"AlertProcessing\"]}",
                                        "fe_metadata": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"AlertProcessing\":{\"type\":\"object\",\"properties\":{\"AlertID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"AlertID\",\"isSummary\":true}},\"AlertType\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Alert Type\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AlertType\",\"isSummary\":true}},\"IncidentLocation\":{\"type\":\"string\",\"maxLength\":500,\"title\":\"IncidentLocation\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"28\",\"internalName\":\"IncidentLocation\"}},\"Description\":{\"type\":\"string\",\"maxLength\":250,\"title\":\"Description\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"Description\"}},\"Severity\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Severity\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"Severity\",\"isSummary\":true}},\"AffectedParties\":{\"type\":\"object\",\"properties\":{\"AgencyID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Agency ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"11\",\"internalName\":\"AgencyID\"}},\"RouteID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Route ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"14\",\"internalName\":\"RouteID\"}},\"StopID\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Stop ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"15\",\"internalName\":\"StopID\"}}}},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}}},\"required\":[\"IncidentLocation\"]}},\"required\":[\"AlertProcessing\"]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CreateCaseInDB",
                        "name": "CreateCaseInDB",
                        "description": "This activity executes insert on a MySQL database",
                        "activity": {
                            "ref": "#insert",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "InsertStatement": "INSERT INTO gtfscontroldb.gtfs_alertcasetracking (alert_id, caseRef, case_url, end_time, start_time, case_state, incident_url, location,longitude, latitude) VALUES(?alert_id, ?caseRef, ?case_url, '', ?start_time, '', ?incident_url, ?location, ?longitude, ?latitude);",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "incident_url",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "location",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "longitude",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "latitude",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    }
                                ],
                                "State": "ed2bc3f6-7807-49a1-b829-a6b62e8dea30INSERT INTO gtfscontroldb.gtfs_alertcasetracking (alert_id, caseRef, case_url, end_time, start_time, case_state, incident_url, location,longitude, latitude) VALUES(?alert_id, ?caseRef, ?case_url, '', ?start_time, '', ?incident_url, ?location, ?longitude, ?latitude);",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "alert_id": "=$flow.notification.alert_id",
                                            "caseRef": "=$activity[LiveAppsCreateCase].caseRef",
                                            "case_url": "=string.concat($property[\"LA_details.Liveapps_region_url_\"],\"/apps/case-app/index.html#/details/\",$property[\"LA_details.Liveapps_App_ID\"],\"/1/\",$activity[LiveAppsCreateCase].caseRef)",
                                            "incident_url": "=$flow.notification.url",
                                            "location": "=$activity[InvokeRESTService].responseBody.data[0].label",
                                            "start_time": "=$flow.notification.start_time",
                                            "longitude": "=string.tostring($activity[InvokeRESTService].responseBody.data[0].longitude)",
                                            "latitude": "=string.tostring($activity[InvokeRESTService].responseBody.data[0].latitude)"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Print_CaseCreatedID",
                        "name": "Print_CaseCreatedID",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"######## Liveapps Case Created : \", $activity[LiveAppsCreateCase].caseRef)"
                            }
                        }
                    },
                    {
                        "id": "ConstructResponseToTCE",
                        "name": "ConstructResponseToTCE",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "caseRef": "=$activity[LiveAppsCreateCase].caseRef",
                                        "end_time": "",
                                        "status": "Reported",
                                        "alert_id": "=$flow.notification.alert_id"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"alert_id\": \"\",\n\t\"caseRef\":\"\",\n\t\"end_time\": \"\",\n\t\"status\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"alert_id\": \"\",\n  \"caseRef\": \"\",\n  \"end_time\": \"\",\n  \"status\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "Simple Return Activity",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "payload": "=$activity[ConstructResponseToTCE].output"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "notification",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}},\"position\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"}}}}"
                            }
                        }
                    ],
                    "output": [
                        {
                            "name": "payload",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}},\"position\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"}}}}}}}",
                        "output": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}"
                    }
                }
            }
        },
        {
            "id": "flow:SendNotifications",
            "data": {
                "name": "SendNotifications",
                "description": "This flow will generate the necessary NOTIIFICATIONS based on Incoming Alert TYPE.",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"####### SEND NOTIFICATIONS FOR : \", $flow.notification.cause, \"#######\")"
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "Simple Return Activity",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "payload": "####### ALERTED ALL RESPECTIVE ENTITIES #######"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "notification",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}},\"position\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"}}}}"
                            }
                        }
                    ],
                    "output": [
                        {
                            "name": "payload",
                            "type": "string"
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"notification\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"cause\":{\"type\":\"string\"},\"effect\":{\"type\":\"string\"},\"severity_level\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"header\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"url\":{\"type\":\"string\"},\"informed_entity\":{\"type\":\"object\",\"properties\":{\"agencyId\":{\"type\":\"string\"},\"routeId\":{\"type\":\"string\"},\"stopId\":{\"type\":\"string\"}}},\"position\":{\"type\":\"object\",\"properties\":{\"latitude\":{\"type\":\"number\"},\"longitude\":{\"type\":\"number\"}}}}}}}",
                        "output": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}"
                    }
                }
            }
        },
        {
            "id": "flow:SetResourceForLACaseProcessing",
            "data": {
                "name": "SetResourceForLACaseProcessing",
                "description": "This will assign the resource for INCIDENT based on area or location",
                "links": [
                    {
                        "id": 1,
                        "from": "GetOauthToken",
                        "to": "getListOfUserFromLA",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "getListOfUserFromLA",
                        "to": "MapUserList",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "MapUserList",
                        "to": "GetUserName",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "GetUserName",
                        "to": "LogMessage",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "LogMessage",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "GetOauthToken",
                        "name": "GetOauthToken",
                        "description": "Invokes a REST Service",
                        "activity": {
                            "ref": "#rest_1",
                            "settings": {
                                "method": "POST",
                                "uri": "https://liveapps.cloud.tibco.com/idm/v3/login-oauth",
                                "headers": "",
                                "proxy": "",
                                "timeout": 0,
                                "sslConfig": ""
                            },
                            "input": {
                                "headers": {
                                    "mapping": {
                                        "Content-Type": "application/x-www-form-urlencoded"
                                    }
                                },
                                "content": "=string.concat(\"ClientID=\",$property[\"LA_details.ClientID\"],\"&Email=\",$property[\"LA_details.Email\"],\"&Password=\",$property[\"LA_details.Password\"],\"&TenantId=\",$property[\"LA_details.TenantId\"])"
                            }
                        }
                    },
                    {
                        "id": "getListOfUserFromLA",
                        "name": "getListOfUserFromLA",
                        "description": "Simple REST Activity",
                        "settings": {
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#rest",
                            "input": {
                                "enableASR": false,
                                "swagger": "",
                                "serviceName": "",
                                "resourcePath": "",
                                "Method": "GET",
                                "Uri": "https://liveapps.cloud.tibco.com/organisation/v1/users?%24top=1000",
                                "Timeout": 0,
                                "requestType": "application/json",
                                "Use certificate for verification": false,
                                "Server Certificate": "",
                                "proxy": "",
                                "host": "",
                                "headers": {
                                    "mapping": {
                                        "Cookie": "=string.concat($activity[GetOauthToken].cookies[0], \";\", $activity[GetOauthToken].cookies[1])"
                                    }
                                }
                            },
                            "output": {
                                "configureResponseCodes": false,
                                "responseType": "application/json"
                            },
                            "schemas": {
                                "input": {
                                    "headers": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"Accept\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Charset\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Encoding\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Type\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Length\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Connection\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Cookie\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Pragma\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false}]"
                                    }
                                },
                                "output": {
                                    "responseBody": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}}",
                                        "fe_metadata": "[{\n    \n}]"
                                    },
                                    "headers": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"Accept\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Charset\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Encoding\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Type\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Length\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Connection\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Cookie\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Pragma\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false}]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "MapUserList",
                        "name": "MapUserList",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "data": "=$activity[getListOfUserFromLA].responseBody",
                                        "seletor": "=number.random(10)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"externalId\":{\"type\":\"string\"},\"firstName\":{\"type\":\"string\"},\"lastName\":{\"type\":\"string\"},\"username\":{\"type\":\"string\"},\"email\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"id\":{\"type\":\"string\"}}}},\"seletor\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n    \"data\":[{\n        \"externalId\": \"wubtjrwncqn6mikkuxg7bdnb7lfu3hrw\",\n        \"firstName\": \"Hitesh\",\n        \"lastName\": \"Nembhwani\",\n        \"username\": \"hnembhwa@tibco.com\",\n        \"email\": \"hnembhwa@tibco.com\",\n        \"type\": \"Standard\",\n        \"id\": \"31864\"\n    }],\n    \"seletor\":1\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"data\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"externalId\":{\"type\":\"string\"},\"firstName\":{\"type\":\"string\"},\"lastName\":{\"type\":\"string\"},\"username\":{\"type\":\"string\"},\"email\":{\"type\":\"string\"},\"type\":{\"type\":\"string\"},\"id\":{\"type\":\"string\"}}}},\"seletor\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n  \"data\": [\n    {\n      \"externalId\": \"wubtjrwncqn6mikkuxg7bdnb7lfu3hrw\",\n      \"firstName\": \"Hitesh\",\n      \"lastName\": \"Nembhwani\",\n      \"username\": \"hnembhwa@tibco.com\",\n      \"email\": \"hnembhwa@tibco.com\",\n      \"type\": \"Standard\",\n      \"id\": \"31864\"\n    }\n  ],\n  \"seletor\": 1\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetUserName",
                        "name": "GetUserName",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "Name": "=string.concat($activity[MapUserList].output.data[$activity[MapUserList].output.seletor].firstName, \" \", $activity[MapUserList].output.data[$activity[MapUserList].output.seletor].lastName)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"Name\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"Name\":\"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"Name\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"Name\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=$activity[GetUserName].output.Name"
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "Simple Return Activity",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "code": 200,
                                    "data": {
                                        "mapping": {
                                            "resourceName": "=$activity[GetUserName].output.Name"
                                        }
                                    }
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "queryParams",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"location\":{\"type\":\"string\"}}"
                            }
                        },
                        {
                            "name": "headers",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}}"
                            }
                        }
                    ],
                    "output": [
                        {
                            "name": "code",
                            "type": "integer"
                        },
                        {
                            "name": "data",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"resourceName\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"ReceiveHTTPMessage\",\"properties\":{\"queryParams\":{\"type\":\"object\",\"properties\":{\"location\":{\"type\":\"string\"}},\"required\":[\"location\"]},\"headers\":{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[]}}}",
                        "output": "{\"type\":\"object\",\"title\":\"Inputs\",\"properties\":{\"code\":{\"type\":\"integer\",\"required\":false},\"data\":{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"resourceName\":{\"type\":\"string\"}}}},\"required\":[]}"
                    }
                },
                "explicitReply": true
            }
        },
        {
            "id": "flow:CreateStreamForIncidentData",
            "data": {
                "name": "CreateStreamForIncidentData",
                "description": "This will create a steam for ALL incident data (open and closed) for data-steams and publish it over TCM to consume by SpotFire",
                "links": [
                    {
                        "id": 1,
                        "from": "MySQLQuery",
                        "to": "LogMessage2",
                        "type": "expression",
                        "label": "MySQLQuerytoLogMessage2",
                        "value": "array.count($activity[MySQLQuery].Output.records)==0"
                    },
                    {
                        "id": 2,
                        "from": "MySQLQuery",
                        "to": "setIncidentDataSteam",
                        "type": "expression",
                        "label": "MySQLQuerytosetIncidentDataSteam",
                        "value": "array.count($activity[MySQLQuery].Output.records)>0"
                    },
                    {
                        "id": 3,
                        "from": "setIncidentDataSteam",
                        "to": "GetIncidents_forGivenTimeOnly",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "GetIncidents_forGivenTimeOnly",
                        "to": "InvokeRESTService",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "InvokeRESTService",
                        "to": "LogMessage",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "MySQLQuery",
                        "name": "MySQLQuery",
                        "description": "This activity executes query on a MySQL database",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "QueryName": "",
                                "Query": "SELECT  * FROM gtfs_alertcasetracking ga ORDER BY caseRef ASC;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "alert_type",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "latitude",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "longitude",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "incident_url",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "location",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    }
                                ],
                                "State": "832beac9-fe87-4140-ba35-bac01ce45820SELECT  * FROM gtfs_alertcasetracking ga ORDER BY caseRef ASC;"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"}}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage2",
                        "name": "LogMessage2",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "#### NO STREAM TO PUBLISH ####"
                            }
                        }
                    },
                    {
                        "id": "setIncidentDataSteam",
                        "name": "setIncidentDataSteam",
                        "description": "Mapper Activity",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[MySQLQuery].Output.records",
                            "accumulate": true
                        },
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "_dest": "=$property[\"TCM_Destinations._incidentDataStream\"]",
                                        "incident_id": "=$iteration[value].alert_id",
                                        "caseRef": "=$iteration[value].caseRef",
                                        "case_state": "=$iteration[value].case_state",
                                        "case_url": "=$iteration[value].case_url",
                                        "end_time": "=$iteration[value].end_time",
                                        "incident_url": "=$iteration[value].incident_url",
                                        "location": "=$iteration[value].location",
                                        "start_time": "=datetime.format(coerce.toInt(($iteration[value].start_time))*1000, \"yyyy-MM-dd HH:mm:ss\")",
                                        "latitude": "=$iteration[value].latitude",
                                        "longitude": "=$iteration[value].longitude",
                                        "alert_type": "=$iteration[value].alert_type"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"_dest\":{\"type\":\"string\"},\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"_dest\": \"\",\n\t\"incident_id\": \"43054___423_1\",\n\t\"caseRef\": \"4127921\",\n\t\"case_state\": \"Close\",\n\t\"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n\t\"end_time\": \"1613641403\",\n\t\"incident_url\": \"https://www.transportnsw.info/alerts#/dummy_43054___423_1\",\n\t\"location\": \"ThanhBinh Restaurant, Newtown, NSW, Australia\",\n\t\"start_time\": \"1613628778\",\n\t \"latitude\":\"\",\n\t  \"longitude\":\"\",\n\t  \"alert_type\":\"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"_dest\":{\"type\":\"string\"},\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"_dest\": \"\",\n  \"incident_id\": \"43054___423_1\",\n  \"caseRef\": \"4127921\",\n  \"case_state\": \"Close\",\n  \"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n  \"end_time\": \"1613641403\",\n  \"incident_url\": \"https://www.transportnsw.info/alerts#/dummy_43054___423_1\",\n  \"location\": \"ThanhBinh Restaurant, Newtown, NSW, Australia\",\n  \"start_time\": \"1613628778\",\n  \"latitude\": \"\",\n  \"longitude\": \"\",\n  \"alert_type\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetIncidents_forGivenTimeOnly",
                        "name": "GetIncidents_forGivenTimeOnly",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "@foreach($activity[setIncidentDataSteam], input,datetime.diff($loop.output.start_time,datetime.current(), \"hours\") <= $property[\"Incident_Stream_Config.Time_Interval\"])": {
                                            "start_time": "=string.tostring(number.int64(datetime.diff('1970-01-01T00:00:00Z', $loop.output.start_time, 'seconds')))",
                                            "incident_id": "=$loop.output.incident_id",
                                            "caseRef": "=$loop.output.caseRef",
                                            "case_state": "=$loop.output.case_state",
                                            "case_url": "=$loop.output.case_url",
                                            "end_time": "=$loop.output.end_time",
                                            "incident_url": "=$loop.output.incident_url",
                                            "location": "=$loop.output.location",
                                            "latitude": "=$loop.output.latitude",
                                            "longitude": "=$loop.output.longitude",
                                            "alert_type": "=$loop.output.alert_type"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"}}}}",
                                        "fe_metadata": "[{\n\t\"incident_id\": \"43054___423_1\",\n\t\"caseRef\": \"4127921\",\n\t\"case_state\": \"Close\",\n\t\"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n\t\"end_time\": \"1613641403\",\n\t\"incident_url\": \"https://www.transportnsw.info/alerts#/dummy_43054___423_1\",\n\t\"location\": \"ThanhBinh Restaurant, Newtown, NSW, Australia\",\n\t\"start_time\": \"1613628778\",\n\t \"latitude\":\"\",\n\t  \"longitude\":\"\",\n\t  \"alert_type\":\"\"\n}]"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"}}}}",
                                        "fe_metadata": "[\n  {\n    \"incident_id\": \"43054___423_1\",\n    \"caseRef\": \"4127921\",\n    \"case_state\": \"Close\",\n    \"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n    \"end_time\": \"1613641403\",\n    \"incident_url\": \"https://www.transportnsw.info/alerts#/dummy_43054___423_1\",\n    \"location\": \"ThanhBinh Restaurant, Newtown, NSW, Australia\",\n    \"start_time\": \"1613628778\",\n    \"latitude\": \"\",\n    \"longitude\": \"\",\n    \"alert_type\": \"\"\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "InvokeRESTService",
                        "name": "InvokeRESTService",
                        "description": "Simple REST Activity",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[GetIncidents_forGivenTimeOnly].output",
                            "accumulate": false,
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#rest",
                            "input": {
                                "enableASR": false,
                                "swagger": "",
                                "serviceName": "",
                                "resourcePath": "",
                                "Method": "POST",
                                "Uri": "=$property[\"TCM_Destinations.TCM_URL\"]",
                                "Timeout": 0,
                                "requestType": "application/json",
                                "Use certificate for verification": false,
                                "Server Certificate": "",
                                "proxy": "",
                                "host": "",
                                "headers": {
                                    "mapping": {
                                        "Authorization": "=string.concat(\"Basic \", string.stringToBase64(string.concat(\":\",$property[\"TCM_Destinations.authKey\"])))"
                                    }
                                },
                                "body": {
                                    "mapping": {
                                        "_dest": "=$property[\"TCM_Destinations._incidentDataStream\"]",
                                        "caseRef": "=$iteration[value].caseRef",
                                        "case_state": "=$iteration[value].case_state",
                                        "case_url": "=$iteration[value].case_url",
                                        "end_time": "=$iteration[value].end_time",
                                        "longitude": "=$iteration[value].longitude",
                                        "latitude": "=$iteration[value].latitude",
                                        "location": "=$iteration[value].location",
                                        "incident_url": "=$iteration[value].incident_url",
                                        "alert_type": "=$iteration[value].alert_type",
                                        "incident_id": "=$iteration[value].incident_id",
                                        "start_time": "=$iteration[value].start_time"
                                    }
                                }
                            },
                            "output": {
                                "configureResponseCodes": false,
                                "responseType": "application/json"
                            },
                            "schemas": {
                                "input": {
                                    "headers": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"Authorization\":{\"type\":\"string\"},\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"Authorization\",\"type\":\"string\",\"repeating\":\"\",\"required\":\"\"},{\"parameterName\":\"Accept\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Charset\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Encoding\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Type\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Length\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Connection\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Cookie\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Pragma\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false}]"
                                    },
                                    "body": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"_dest\":{\"type\":\"string\"},\"incident_id\":{\"type\":\"string\"},\"alert_type\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"longitude\":{\"type\":\"string\"},\"latitude\":{\"type\":\"string\"},\"location\":{\"type\":\"string\"},\"incident_url\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"_dest\": \"\",\n\t\"incident_id\": \"43054___423_1\",\n\t\"alert_type\":\"\",\n\t\"caseRef\": \"4127921\",\n\t\"case_state\": \"Close\",\n\t\"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n\t\"start_time\": \"1613628778\",\n\t\"end_time\": \"1613641403\",\n\t\"longitude\":\"\",\n\t\"latitude\":\"\",\n\t\"location\": \"ThanhBinh Restaurant, Newtown, NSW, Australia\",\n\t\"incident_url\": \"https://www.transportnsw.info/alerts#/dummy_43054___423_1\"\n}"
                                    }
                                },
                                "output": {
                                    "headers": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"Accept\":{\"type\":\"string\",\"visible\":false},\"Accept-Charset\":{\"type\":\"string\",\"visible\":false},\"Accept-Encoding\":{\"type\":\"string\",\"visible\":false},\"Content-Type\":{\"type\":\"string\",\"visible\":false},\"Content-Length\":{\"type\":\"string\",\"visible\":false},\"Connection\":{\"type\":\"string\",\"visible\":false},\"Cookie\":{\"type\":\"string\",\"visible\":false},\"Pragma\":{\"type\":\"string\",\"visible\":false}},\"required\":[]}",
                                        "fe_metadata": "[{\"parameterName\":\"Accept\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Charset\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Accept-Encoding\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Type\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Content-Length\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Connection\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Cookie\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false},{\"parameterName\":\"Pragma\",\"type\":\"string\",\"repeating\":\"false\",\"required\":\"false\",\"visible\":false}]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"###### TOTAL INCIDENTS IN STEAM : \", coerce.toString(array.count($activity[GetIncidents_forGivenTimeOnly].output)))"
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [],
                    "output": [],
                    "fe_metadata": {}
                }
            }
        },
        {
            "id": "flow:CreateNewAlertForDTVD",
            "data": {
                "name": "CreateNewAlertForDTVD",
                "description": "This flow will generate new case for incoming event",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "ParseJSONActivity",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "ParseJSONActivity",
                        "to": "CreateCaseStructure",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "CreateCaseStructure",
                        "to": "sendNotify",
                        "type": "label",
                        "label": "IfAccident"
                    },
                    {
                        "id": 4,
                        "from": "sendNotify",
                        "to": "LogMessage3",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "LogMessage3",
                        "to": "CreateAccidentCase",
                        "type": "default"
                    },
                    {
                        "id": 6,
                        "from": "CreateAccidentCase",
                        "to": "TCMMessagePublisher",
                        "type": "default"
                    },
                    {
                        "id": 7,
                        "from": "CreateCaseStructure",
                        "to": "LogMessage2",
                        "type": "exprOtherwise",
                        "label": "CreateCaseStructuretoLogMessage2"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"Incoming Alert Notification : -> \",string.tostring($flow.message))"
                            }
                        }
                    },
                    {
                        "id": "ParseJSONActivity",
                        "name": "ParseJSONActivity",
                        "description": "Parses JSON string into JSON object",
                        "activity": {
                            "ref": "#parsejson",
                            "input": {
                                "validate": false,
                                "jsonString": "=string.tostring($flow.message)"
                            },
                            "schemas": {
                                "output": {
                                    "jsonObject": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"_nm_\":{\"type\":\"string\"},\"_ns_\":{\"type\":\"string\"},\"_sandboxinglevel_\":{\"type\":\"string\"},\"_sandboxname_\":{\"type\":\"string\"},\"_subscriptionid_\":{\"type\":\"string\"},\"_tenant_\":{\"type\":\"string\"},\"_userid_\":{\"type\":\"string\"},\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n\t\"_nm_\": \"DTVD_SendAlertEvent\",\n\t\"_ns_\": \"www.tibco.com/be/ontology/Events/DTVD/DTVD_SendAlertEvent\",\n\t\"_sandboxinglevel_\": \"no_sandboxing\",\n\t\"_sandboxname_\": \"\",\n\t\"_subscriptionid_\": \"1\",\n\t\"_tenant_\": \"BE\",\n\t\"_userid_\": \"\",\n\t\"avg_centroid_speed\": 77.110455,\n\t\"class_name\": \"car\",\n\t\"direction\": \"left\",\n\t\"image\": \"http://sample.com/image1.png\",\n\t\"lastcnt\": 4,\n\t\"lastupdate\": 1613752733257,\n\t\"trackid\": 37\n}\n"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CreateCaseStructure",
                        "name": "CreateCaseStructure",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "avg_centroid_speed": "=$activity[ParseJSONActivity].jsonObject.avg_centroid_speed",
                                        "class_name": "=$activity[ParseJSONActivity].jsonObject.class_name",
                                        "direction": "=$activity[ParseJSONActivity].jsonObject.direction",
                                        "image": "=$activity[ParseJSONActivity].jsonObject.image",
                                        "lastcnt": "=$activity[ParseJSONActivity].jsonObject.lastcnt",
                                        "lastupdate": "=$activity[ParseJSONActivity].jsonObject.lastupdate",
                                        "trackid": "=$activity[ParseJSONActivity].jsonObject.trackid"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n\t\"avg_centroid_speed\": 77.110455,\n\t\"class_name\": \"car\",\n\t\"direction\": \"left\",\n\t\"image\": \"http://sample.com/image1.png\",\n\t\"lastcnt\": 4,\n\t\"lastupdate\": 1613752733257,\n\t\"trackid\": 37\n}\n"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\n  \"avg_centroid_speed\": 77.110455,\n  \"class_name\": \"car\",\n  \"direction\": \"left\",\n  \"image\": \"http://sample.com/image1.png\",\n  \"lastcnt\": 4,\n  \"lastupdate\": 1613752733257,\n  \"trackid\": 37\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "sendNotify",
                        "name": "sendNotify",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:DTVD_SendNotifications"
                            },
                            "input": {
                                "avg_centroid_speed": "=$activity[CreateCaseStructure].output.avg_centroid_speed",
                                "class_name": "=$activity[CreateCaseStructure].output.class_name",
                                "direction": "=$activity[CreateCaseStructure].output.direction",
                                "image": "=$activity[CreateCaseStructure].output.image",
                                "lastcnt": "=$activity[CreateCaseStructure].output.lastcnt",
                                "lastupdate": "=$activity[CreateCaseStructure].output.lastupdate",
                                "trackid": "=$activity[CreateCaseStructure].output.trackid"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage3",
                        "name": "LogMessage3",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"Incoming payloaad : \", string.tostring($activity[CreateCaseStructure].output))"
                            }
                        }
                    },
                    {
                        "id": "CreateAccidentCase",
                        "name": "CreateAccidentCase",
                        "description": "Simple SubFlow Activity",
                        "activity": {
                            "ref": "#subflow",
                            "settings": {
                                "flowURI": "res://flow:DTVD_CreateNewCase"
                            },
                            "input": {
                                "avg_centroid_speed": "=$activity[CreateCaseStructure].output.avg_centroid_speed",
                                "class_name": "=$activity[CreateCaseStructure].output.class_name",
                                "direction": "=$activity[CreateCaseStructure].output.direction",
                                "image": "=$activity[CreateCaseStructure].output.image",
                                "lastcnt": "=$activity[CreateCaseStructure].output.lastcnt",
                                "lastupdate": "=$activity[CreateCaseStructure].output.lastupdate",
                                "trackid": "=$activity[CreateCaseStructure].output.trackid"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "TCMMessagePublisher",
                        "name": "TCMMessagePublisher",
                        "description": "This activity sends a message to TIBCO Cloud Messaging service",
                        "settings": {
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#tcmpublisher",
                            "input": {
                                "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                                "destination": "=$property[\"TCM_Destinations.DTVD_caseCreated\"]",
                                "url": "",
                                "authKey": "",
                                "message": {
                                    "mapping": {
                                        "payload": "=string.tostring($activity[CreateAccidentCase].payload)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "message": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"payload\":  \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage2",
                        "name": "LogMessage2",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": " ###### NO SUITABLE FLOW AVAILABLE #####"
                            }
                        }
                    }
                ],
                "errorHandler": {
                    "tasks": [
                        {
                            "id": "LogMessage1",
                            "name": "LogMessage1",
                            "description": "Simple Log Message Activity",
                            "activity": {
                                "ref": "#log",
                                "input": {
                                    "Log Level": "INFO",
                                    "flowInfo": false,
                                    "message": "=string.concat($error.activity, \" - \",$error.message, \" - \", $error.data)"
                                }
                            }
                        }
                    ],
                    "links": []
                },
                "metadata": {
                    "input": [
                        {
                            "name": "message",
                            "type": "object"
                        }
                    ],
                    "output": [],
                    "fe_metadata": {
                        "input": "{\"type\":\"object\",\"title\":\"MessageSubscriber\",\"properties\":{\"message\":{\"type\":\"object\"}}}"
                    }
                }
            }
        },
        {
            "id": "flow:DTVD_SendNotifications",
            "data": {
                "name": "DTVD_SendNotifications",
                "description": "This flow will generate the necessary NOTIIFICATIONS based on Incoming Alert TYPE.",
                "links": [
                    {
                        "id": 1,
                        "from": "LogMessage",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"####### SEND NOTIFICATIONS FOR : \", coerce.toString($flow.trackid), \"#######\")"
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "Simple Return Activity",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "payload": "####### ALERTED ALL RESPECTIVE ENTITIES #######"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "avg_centroid_speed",
                            "type": "float64"
                        },
                        {
                            "name": "class_name",
                            "type": "string"
                        },
                        {
                            "name": "direction",
                            "type": "string"
                        },
                        {
                            "name": "image",
                            "type": "string"
                        },
                        {
                            "name": "lastcnt",
                            "type": "float64"
                        },
                        {
                            "name": "lastupdate",
                            "type": "float64"
                        },
                        {
                            "name": "trackid",
                            "type": "float64"
                        }
                    ],
                    "output": [
                        {
                            "name": "payload",
                            "type": "string"
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}",
                        "output": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}"
                    }
                }
            }
        },
        {
            "id": "flow:DTVD_CreateNewCase",
            "data": {
                "name": "DTVD_CreateNewCase",
                "description": "This subflow will create the LA CASE and update it in DB",
                "links": [
                    {
                        "id": 1,
                        "from": "LogIncomingAlert",
                        "to": "Mapper",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "Mapper",
                        "to": "LiveAppsCreateCase",
                        "type": "default"
                    },
                    {
                        "id": 3,
                        "from": "LiveAppsCreateCase",
                        "to": "CreateCaseInDB",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "CreateCaseInDB",
                        "to": "Print_CaseCreatedID",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "Print_CaseCreatedID",
                        "to": "ConstructResponseToTCE",
                        "type": "default"
                    },
                    {
                        "id": 6,
                        "from": "ConstructResponseToTCE",
                        "to": "Return",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "LogIncomingAlert",
                        "name": "LogIncomingAlert",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"##### CREATING NEW CASE FOR TRACKING ID :\",string.tostring($flow.trackid), \"#######\")"
                            }
                        }
                    },
                    {
                        "id": "Mapper",
                        "name": "Mapper",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "lastupdated": "=string.tostring($flow.lastupdate)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"lastupdated\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"lastupdated\":\"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"lastupdated\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"lastupdated\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LiveAppsCreateCase",
                        "name": "LiveAppsCreateCase",
                        "description": "Live Apps Create Case",
                        "activity": {
                            "ref": "#create",
                            "input": {
                                "applicationId": "4941",
                                "artifactId": "27731",
                                "sandboxId": "6440",
                                "processName": "CreateAlert",
                                "data": {
                                    "mapping": {
                                        "DTVD_IncidentProcessing": {
                                            "AverageSpeedofVehicle": "=$flow.avg_centroid_speed",
                                            "IncidentID": "=$flow.trackid",
                                            "DirectionOfVehicle": "=$flow.direction",
                                            "TypeofVehicle": "=$flow.class_name",
                                            "ImageOfconcernVehicle": {
                                                "address": "=$flow.image",
                                                "linkText": "Image Link"
                                            },
                                            "DateCreated": "=datetime.formatDate(datetime.format(string.integer($activity[Mapper].output.lastupdated)*1000, \"yyyy-MM-dd HH:mm:ss\"),\"yyyy-MM-dd\")",
                                            "TimeCreated": "=datetime.formatTime(datetime.format(string.integer($activity[Mapper].output.lastupdated)*1000, \"yyyy-MM-dd HH:mm:ss\"),\"hh:mm\")"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "data": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"DTVD_IncidentProcessing\":{\"type\":\"object\",\"properties\":{\"IncidentID\":{\"type\":\"integer\",\"title\":\"Incident ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"IncidentID\",\"isSummary\":true}},\"AverageSpeedofVehicle\":{\"type\":\"integer\",\"title\":\"Average Speed of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AverageSpeedofVehicle\",\"isSummary\":true}},\"DirectionOfVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Direction Of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"DirectionOfVehicle\"}},\"TypeofVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Type of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"30\",\"internalName\":\"TypeofVehicle\"}},\"ImageOfconcernVehicle\":{\"type\":\"object\",\"title\":\"Image Of concern Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"ImageOfconcernVehicle\"},\"properties\":{\"linkText\":{\"type\":\"string\",\"title\":\"Link Text\"},\"address\":{\"type\":\"string\",\"title\":\"Address\"}},\"required\":[\"address\"]},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}}},\"required\":[\"IncidentID\",\"AverageSpeedofVehicle\",\"DirectionOfVehicle\",\"TypeofVehicle\",\"ImageOfconcernVehicle\",\"DateCreated\"]}},\"required\":[\"DTVD_IncidentProcessing\"]}",
                                        "fe_metadata": "{\"type\":\"object\",\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"properties\":{\"DTVD_IncidentProcessing\":{\"type\":\"object\",\"properties\":{\"IncidentID\":{\"type\":\"integer\",\"title\":\"Incident ID\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"3\",\"internalName\":\"IncidentID\",\"isSummary\":true}},\"AverageSpeedofVehicle\":{\"type\":\"integer\",\"title\":\"Average Speed of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"4\",\"internalName\":\"AverageSpeedofVehicle\",\"isSummary\":true}},\"DirectionOfVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Direction Of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"5\",\"internalName\":\"DirectionOfVehicle\"}},\"TypeofVehicle\":{\"type\":\"string\",\"maxLength\":50,\"title\":\"Type of Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"30\",\"internalName\":\"TypeofVehicle\"}},\"ImageOfconcernVehicle\":{\"type\":\"object\",\"title\":\"Image Of concern Vehicle\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"6\",\"internalName\":\"ImageOfconcernVehicle\"},\"properties\":{\"linkText\":{\"type\":\"string\",\"title\":\"Link Text\"},\"address\":{\"type\":\"string\",\"title\":\"Address\"}},\"required\":[\"address\"]},\"DateCreated\":{\"type\":\"string\",\"format\":\"date\",\"title\":\"Date Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"8\",\"internalName\":\"DateCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}},\"TimeCreated\":{\"type\":\"string\",\"format\":\"date-time\",\"title\":\"Time Created\",\"la_metadata\":{\"type\":\"metadata\",\"id\":\"19\",\"internalName\":\"TimeCreated\",\"constraints\":{\"type\":\"constraint\",\"initialValue\":\"now\"}}}},\"required\":[\"IncidentID\",\"AverageSpeedofVehicle\",\"DirectionOfVehicle\",\"TypeofVehicle\",\"ImageOfconcernVehicle\",\"DateCreated\"]}},\"required\":[\"DTVD_IncidentProcessing\"]}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CreateCaseInDB",
                        "name": "CreateCaseInDB",
                        "description": "This activity executes insert on a MySQL database",
                        "activity": {
                            "ref": "#insert",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "InsertStatement": "INSERT INTO gtfscontroldb.dtvd_alertcasetracking (alert_id, caseRef, case_url, start_time, end_time, case_state,  avg_speed, class_name, image) VALUES(?alert_id, ?caseRef, ?case_url, ?start_time, ?end_time, ?case_state, ?avg_speed, ?class_name, ?image);",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "avg_speed",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "class_name",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "image",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    }
                                ],
                                "State": "7d501f61-eef7-49fd-95e6-fd2fce899116INSERT INTO gtfscontroldb.dtvd_alertcasetracking (alert_id, caseRef, case_url, start_time, end_time, case_state,  avg_speed, class_name, image) VALUES(?alert_id, ?caseRef, ?case_url, ?start_time, ?end_time, ?case_state, ?avg_speed, ?class_name, ?image);",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "alert_id": "=string.tostring($flow.trackid)",
                                            "caseRef": "=$activity[LiveAppsCreateCase].caseRef",
                                            "start_time": "=string.tostring($flow.lastupdate)",
                                            "end_time": "",
                                            "case_state": "",
                                            "avg_speed": "=string.tostring($flow.avg_centroid_speed)",
                                            "class_name": "=$flow.class_name",
                                            "image": "=$flow.image",
                                            "case_url": "=string.concat($property[\"LA_details.Liveapps_region_url_\"],\"/apps/case-app/index.html#/details/\",$property[\"LA_details.Liveapps_DTVD_APP_ID\"],\"/1/\",$activity[LiveAppsCreateCase].caseRef)"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Print_CaseCreatedID",
                        "name": "Print_CaseCreatedID",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"######## Liveapps Case Created : \", $activity[LiveAppsCreateCase].caseRef)"
                            }
                        }
                    },
                    {
                        "id": "ConstructResponseToTCE",
                        "name": "ConstructResponseToTCE",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "alert_id": "=string.tostring($flow.trackid)",
                                        "caseRef": "=$activity[LiveAppsCreateCase].caseRef",
                                        "end_time": "",
                                        "status": "Reported"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"alert_id\": \"\",\n\t\"caseRef\":\"\",\n\t\"end_time\": \"\",\n\t\"status\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"alert_id\": \"\",\n  \"caseRef\": \"\",\n  \"end_time\": \"\",\n  \"status\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "Return",
                        "name": "Return",
                        "description": "Simple Return Activity",
                        "activity": {
                            "ref": "#actreturn",
                            "settings": {
                                "mappings": {
                                    "payload": "=$activity[ConstructResponseToTCE].output"
                                }
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [
                        {
                            "name": "avg_centroid_speed",
                            "type": "float64"
                        },
                        {
                            "name": "class_name",
                            "type": "string"
                        },
                        {
                            "name": "direction",
                            "type": "string"
                        },
                        {
                            "name": "image",
                            "type": "string"
                        },
                        {
                            "name": "lastcnt",
                            "type": "float64"
                        },
                        {
                            "name": "lastupdate",
                            "type": "float64"
                        },
                        {
                            "name": "trackid",
                            "type": "float64"
                        }
                    ],
                    "output": [
                        {
                            "name": "payload",
                            "type": "object",
                            "schema": {
                                "type": "json",
                                "value": "{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}"
                            }
                        }
                    ],
                    "fe_metadata": {
                        "input": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"avg_centroid_speed\":{\"type\":\"number\"},\"class_name\":{\"type\":\"string\"},\"direction\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"lastcnt\":{\"type\":\"number\"},\"lastupdate\":{\"type\":\"number\"},\"trackid\":{\"type\":\"number\"}}}",
                        "output": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"}}}}}"
                    }
                }
            }
        },
        {
            "id": "flow:DTVD_CreateStreamForIncidentData",
            "data": {
                "name": "DTVD_CreateStreamForIncidentData",
                "description": "This will create a steam for ALL incident data (open and closed) for data-steams and publish it over TCM to consume by SpotFire",
                "links": [
                    {
                        "id": 1,
                        "from": "MySQLQuery",
                        "to": "LogMessage1",
                        "type": "expression",
                        "label": "MySQLQuerytoLogMessage1",
                        "value": "array.count($activity[MySQLQuery].Output.records)==0"
                    },
                    {
                        "id": 2,
                        "from": "MySQLQuery",
                        "to": "setIncidentDataSteamMapper",
                        "type": "expression",
                        "label": "MySQLQueryto",
                        "value": "array.count($activity[MySQLQuery].Output.records)>0"
                    },
                    {
                        "id": 3,
                        "from": "setIncidentDataSteamMapper",
                        "to": "GetIncidents_forGivenTimeOnly",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "GetIncidents_forGivenTimeOnly",
                        "to": "CopyOfTCMMessagePublisher",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "CopyOfTCMMessagePublisher",
                        "to": "LogMessage",
                        "type": "default"
                    }
                ],
                "tasks": [
                    {
                        "id": "MySQLQuery",
                        "name": "MySQLQuery",
                        "description": "This activity executes query on a MySQL database",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "QueryName": "",
                                "Query": "SELECT  * FROM dtvd_alertcasetracking ga ORDER BY caseRef ASC;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "avg_speed",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "class_name",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "image",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    }
                                ],
                                "State": "edf4a02b-f7fa-4962-8273-5e2a9fadf23cSELECT  * FROM dtvd_alertcasetracking ga ORDER BY caseRef ASC;"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage1",
                        "name": "LogMessage1",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "##### NO DATA FOR STREAM ####"
                            }
                        }
                    },
                    {
                        "id": "setIncidentDataSteamMapper",
                        "name": "setIncidentDataSteamMapper",
                        "description": "Mapper Activity",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[MySQLQuery].Output.records",
                            "accumulate": true
                        },
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "incident_id": "=$iteration[value].alert_id",
                                        "case_state": "=$iteration[value].case_state",
                                        "case_url": "=$iteration[value].case_url",
                                        "start_time": "=datetime.format(coerce.toInt(($iteration[value].start_time))*1000, \"yyyy-MM-dd HH:mm:ss\")",
                                        "end_time": "=$iteration[value].end_time",
                                        "avg_speed": "=$iteration[value].avg_speed",
                                        "class_name": "=$iteration[value].class_name",
                                        "image": "=$iteration[value].image",
                                        "caseRef": "=$iteration[value].caseRef"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"incident_id\": \"43054___423_1\",\n\t\"caseRef\": \"4127921\",\n\t\"case_state\": \"Close\",\n\t\"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n\t\"start_time\": \"1613628778\",\n\t\"end_time\": \"1613641403\",\n\t\"avg_speed\": \"\",\n\t\"class_name\": \"\",\n\t\"image\":\"\"\n\t\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"incident_id\": \"43054___423_1\",\n  \"caseRef\": \"4127921\",\n  \"case_state\": \"Close\",\n  \"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n  \"start_time\": \"1613628778\",\n  \"end_time\": \"1613641403\",\n  \"avg_speed\": \"\",\n  \"class_name\": \"\",\n  \"image\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "GetIncidents_forGivenTimeOnly",
                        "name": "GetIncidents_forGivenTimeOnly",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "@foreach($activity[setIncidentDataSteamMapper], input, datetime.diff($loop.output.start_time,datetime.current(), \"hours\") <= $property[\"Incident_Stream_Config.Time_Interval\"])": {
                                            "incident_id": "=$loop.output.incident_id",
                                            "caseRef": "=$loop.output.caseRef",
                                            "case_state": "=$loop.output.case_state",
                                            "case_url": "=$loop.output.case_url",
                                            "end_time": "=$loop.output.end_time",
                                            "avg_speed": "=$loop.output.avg_speed",
                                            "class_name": "=$loop.output.class_name",
                                            "image": "=$loop.output.image",
                                            "start_time": "=string.tostring(number.int64(datetime.diff('1970-01-01T00:00:00Z', $loop.output.start_time, 'seconds')))"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}",
                                        "fe_metadata": "[{\n\t\"incident_id\": \"43054___423_1\",\n\t\"caseRef\": \"4127921\",\n\t\"case_state\": \"Close\",\n\t\"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n\t\"start_time\": \"1613628778\",\n\t\"end_time\": \"1613641403\",\n\t\"avg_speed\": \"\",\n\t\"class_name\": \"\",\n\t\"image\":\"\"\n}]"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}",
                                        "fe_metadata": "[\n  {\n    \"incident_id\": \"43054___423_1\",\n    \"caseRef\": \"4127921\",\n    \"case_state\": \"Close\",\n    \"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n    \"start_time\": \"1613628778\",\n    \"end_time\": \"1613641403\",\n    \"avg_speed\": \"\",\n    \"class_name\": \"\",\n    \"image\": \"\"\n  }\n]"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "CopyOfTCMMessagePublisher",
                        "name": "CopyOfTCMMessagePublisher",
                        "description": "This activity sends a message to TIBCO Cloud Messaging service",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[GetIncidents_forGivenTimeOnly].output",
                            "accumulate": false,
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#tcmpublisher",
                            "input": {
                                "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                                "destination": "=$property[\"TCM_Destinations.DTVD_incidentDataStream\"]",
                                "url": "",
                                "authKey": "",
                                "message": {
                                    "mapping": {
                                        "incident_id": "=$iteration[value].incident_id",
                                        "caseRef": "=$iteration[value].caseRef",
                                        "case_state": "=$iteration[value].case_state",
                                        "case_url": "=$iteration[value].case_url",
                                        "end_time": "=$iteration[value].end_time",
                                        "image": "=$iteration[value].image",
                                        "avg_speed": "=$iteration[value].avg_speed",
                                        "start_time": "=$iteration[value].start_time",
                                        "class_name": "=$iteration[value].class_name"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "message": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"incident_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"incident_id\": \"43054___423_1\",\n\t\"caseRef\": \"4127921\",\n\t\"case_state\": \"Close\",\n\t\"case_url\": \"https://liveapps.cloud.tibco.com/apps/case-app/index.html#/details/4785/1/4127921\",\n\t\"end_time\": \"1613641403\",\n\t\"image\": \"https://www.transportnsw.info/alerts#/dummy_43054___423_1\",\n\t\"avg_speed\": \"ThanhBinh Restaurant, Newtown, NSW, Australia\",\n\t\"start_time\": \"1613628778\",\n\t\"class_name\":\"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "LogMessage",
                        "name": "LogMessage",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"###### TOTAL INCIDENTS IN STEAM : \", coerce.toString(array.count($activity[GetIncidents_forGivenTimeOnly].output)))"
                            }
                        }
                    }
                ],
                "metadata": {
                    "input": [],
                    "output": [],
                    "fe_metadata": {}
                }
            }
        },
        {
            "id": "flow:DTVD_CloseOfTCEEvent",
            "data": {
                "name": "DTVD_CloseOfTCEEvent",
                "description": "This flow will check the status of the case and if its close then it will ask to close the TCE event.",
                "links": [
                    {
                        "id": 1,
                        "from": "MySQLQuery",
                        "to": "AllCasesInCloseState",
                        "type": "default"
                    },
                    {
                        "id": 2,
                        "from": "AllCasesInCloseState",
                        "to": "ConstructDataForTCEEvent",
                        "type": "expression",
                        "label": "CasesInCloseStatetoTCMMessageAck",
                        "value": "array.count($activity[AllCasesInCloseState].output[\"case\"])>0"
                    },
                    {
                        "id": 3,
                        "from": "ConstructDataForTCEEvent",
                        "to": "TCMMessagePublisher",
                        "type": "default"
                    },
                    {
                        "id": 4,
                        "from": "TCMMessagePublisher",
                        "to": "MySQLInsert",
                        "type": "default"
                    },
                    {
                        "id": 5,
                        "from": "MySQLInsert",
                        "to": "MySQLDelete",
                        "type": "default"
                    },
                    {
                        "id": 6,
                        "from": "MySQLDelete",
                        "to": "TCEEventAck",
                        "type": "default"
                    },
                    {
                        "id": 7,
                        "from": "AllCasesInCloseState",
                        "to": "NothingToAck",
                        "type": "expression",
                        "label": "CasesInCloseStatetoNothingToAck",
                        "value": "array.count($activity[AllCasesInCloseState].output[\"case\"])==0"
                    },
                    {
                        "id": 8,
                        "from": "MySQLQuery",
                        "to": "LogMessage1",
                        "type": "expression",
                        "label": "MySQLQuery to LogMessage1",
                        "value": "array.count($activity[MySQLQuery].Output.records)==0"
                    }
                ],
                "tasks": [
                    {
                        "id": "MySQLQuery",
                        "name": "MySQLQuery",
                        "description": "This activity executes query on a MySQL database",
                        "activity": {
                            "ref": "#query",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "QueryName": "",
                                "Query": "select * from  gtfscontroldb.dtvd_alertcasetracking where case_state='Close';",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "avg_speed",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "class_name",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    },
                                    {
                                        "FieldName": "image",
                                        "Type": "VARCHAR",
                                        "Selected": true,
                                        "Parameter": false,
                                        "isEditable": false
                                    }
                                ],
                                "State": "39794f6f-9839-418c-8fac-ed8ecc8d6bcaselect * from  gtfscontroldb.dtvd_alertcasetracking where case_state='Close';"
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"records\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "AllCasesInCloseState",
                        "name": "AllCasesInCloseState",
                        "description": "Mapper Activity",
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "case": {
                                            "@foreach($activity[MySQLQuery].Output.records, case)": {
                                                "alert_id": "=$loop.alert_id",
                                                "caseRef": "=$loop.caseRef",
                                                "state": "=$loop.case_state",
                                                "end_time": "=$loop.end_time"
                                            }
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"case\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\n    \"case\":[{\n    \"alert_id\":\"\",\n    \"caseRef\":\"\",\n    \"state\":\"\",\n    \"end_time\":\"\"\n    }]\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"case\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"}}}}}}",
                                        "fe_metadata": "{\n  \"case\": [\n    {\n      \"alert_id\": \"\",\n      \"caseRef\": \"\",\n      \"state\": \"\",\n      \"end_time\": \"\"\n    }\n  ]\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "ConstructDataForTCEEvent",
                        "name": "ConstructDataForTCEEvent",
                        "description": "Mapper Activity",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[AllCasesInCloseState].output[\"case\"]",
                            "accumulate": true
                        },
                        "activity": {
                            "ref": "#mapper",
                            "input": {
                                "input": {
                                    "mapping": {
                                        "alert_id": "=$iteration[value].alert_id",
                                        "caseRef": "=$iteration[value].caseRef",
                                        "status": "=$iteration[value].state",
                                        "end_time": "=$iteration[value].end_time"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n\t\"alert_id\": \"\",\n\t\"caseRef\":\"\",\n\t\"end_time\": \"\",\n\t\"status\": \"\"\n}"
                                    }
                                },
                                "output": {
                                    "output": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"status\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n  \"alert_id\": \"\",\n  \"caseRef\": \"\",\n  \"end_time\": \"\",\n  \"status\": \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "TCMMessagePublisher",
                        "name": "TCMMessagePublisher",
                        "description": "This activity sends a message to TIBCO Cloud Messaging service",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[ConstructDataForTCEEvent]",
                            "accumulate": false,
                            "retryOnError": {
                                "count": 0,
                                "interval": 0
                            }
                        },
                        "activity": {
                            "ref": "#tcmpublisher",
                            "input": {
                                "tcmConnection": "conn://a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
                                "destination": "=$property[\"TCM_Destinations.DTVD_caseCreated\"]",
                                "url": "",
                                "authKey": "",
                                "message": {
                                    "mapping": {
                                        "payload": "=string.tostring($iteration[value].output)"
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "message": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"properties\":{\"payload\":{\"type\":\"string\"}}}",
                                        "fe_metadata": "{\n    \"payload\":  \"\"\n}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "MySQLInsert",
                        "name": "MySQLInsert",
                        "description": "This activity executes insert on a MySQL database",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[MySQLQuery].Output.records",
                            "accumulate": false
                        },
                        "activity": {
                            "ref": "#insert",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "InsertStatement": "INSERT INTO gtfscontroldb.dtvd_incidenthistory (alert_id, caseRef, case_url, start_time, end_time, case_state,  avg_speed, class_name, image) VALUES(?alert_id, ?caseRef, ?case_url, ?start_time, ?end_time, ?case_state, ?avg_speed, ?class_name, ?image);",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "alert_id",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "case_url",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "start_time",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "end_time",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "case_state",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "avg_speed",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "class_name",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    },
                                    {
                                        "FieldName": "image",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false,
                                        "Value": false
                                    }
                                ],
                                "State": "6ac80f67-a2db-4943-a1af-6e547ebcbe10INSERT INTO gtfscontroldb.dtvd_incidenthistory (alert_id, caseRef, case_url, start_time, end_time, case_state,  avg_speed, class_name, image) VALUES(?alert_id, ?caseRef, ?case_url, ?start_time, ?end_time, ?case_state, ?avg_speed, ?class_name, ?image);",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "alert_id": "=$iteration[value].alert_id",
                                            "caseRef": "=$iteration[value].caseRef",
                                            "case_url": "=$iteration[value].case_url",
                                            "start_time": "=$iteration[value].start_time",
                                            "case_state": "=$iteration[value].case_state",
                                            "end_time": "=string.tostring(number.int64(datetime.diff('1970-01-01T00:00:00Z', datetime.current(), 'seconds')))",
                                            "avg_speed": "=$iteration[value].avg_speed",
                                            "class_name": "=$iteration[value].class_name",
                                            "image": "=$iteration[value].image"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"values\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{}}},\"parameters\":{\"type\":\"object\",\"properties\":{\"alert_id\":{\"type\":\"string\"},\"caseRef\":{\"type\":\"string\"},\"case_url\":{\"type\":\"string\"},\"start_time\":{\"type\":\"string\"},\"end_time\":{\"type\":\"string\"},\"case_state\":{\"type\":\"string\"},\"avg_speed\":{\"type\":\"string\"},\"class_name\":{\"type\":\"string\"},\"image\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"},\"lastInsertId\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "MySQLDelete",
                        "name": "MySQLDelete",
                        "description": "This activity executes delete on a MySQL database",
                        "type": "iterator",
                        "settings": {
                            "iterate": "=$activity[ConstructDataForTCEEvent]",
                            "accumulate": false
                        },
                        "activity": {
                            "ref": "#delete",
                            "input": {
                                "Connection": "conn://72faaa20-62cd-11eb-b475-57a9b84b5447",
                                "DeleteStatement": "DELETE FROM gtfscontroldb.dtvd_alertcasetracking WHERE caseRef=?caseRef;",
                                "manualmode": false,
                                "Fields": [
                                    {
                                        "FieldName": "caseRef",
                                        "Type": "VARCHAR",
                                        "Selected": false,
                                        "Parameter": true,
                                        "isEditable": false
                                    }
                                ],
                                "State": "ef08ada6-0e34-4e7e-b5c2-d1d554f7fb58DELETE FROM gtfscontroldb.dtvd_alertcasetracking WHERE caseRef=?caseRef;",
                                "input": {
                                    "mapping": {
                                        "parameters": {
                                            "caseRef": "=$iteration[value].output.caseRef"
                                        }
                                    }
                                }
                            },
                            "schemas": {
                                "input": {
                                    "input": {
                                        "type": "json",
                                        "value": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"caseRef\":{\"type\":\"string\"}}}}}",
                                        "fe_metadata": "{\"$schema\":\"http://json-schema.org/draft-04/schema#\",\"type\":\"object\",\"definitions\":{},\"properties\":{\"parameters\":{\"type\":\"object\",\"properties\":{\"caseRef\":{\"type\":\"string\"}}}}}"
                                    }
                                },
                                "output": {
                                    "Output": {
                                        "type": "json",
                                        "value": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}",
                                        "fe_metadata": "{\"type\":\"object\",\"properties\":{\"rowsAffected\":{\"type\":\"int\"}}}"
                                    }
                                }
                            }
                        }
                    },
                    {
                        "id": "TCEEventAck",
                        "name": "TCEEventAck",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "=string.concat(\"##### TOTAL ALERT'S CLOSED  :\", string.tostring(array.count($activity[AllCasesInCloseState].output[\"case\"])))"
                            }
                        }
                    },
                    {
                        "id": "NothingToAck",
                        "name": "NothingToAck",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "####### NO ALERT CASE IN CLOSE STATW #######"
                            }
                        }
                    },
                    {
                        "id": "LogMessage1",
                        "name": "LogMessage1",
                        "description": "Simple Log Message Activity",
                        "activity": {
                            "ref": "#log",
                            "input": {
                                "Log Level": "INFO",
                                "flowInfo": false,
                                "message": "##### EMPTY TABLE ####"
                            }
                        }
                    }
                ],
                "errorHandler": {
                    "tasks": [
                        {
                            "id": "LogMessage",
                            "name": "LogMessage",
                            "description": "Simple Log Message Activity",
                            "activity": {
                                "ref": "#log",
                                "input": {
                                    "Log Level": "INFO",
                                    "flowInfo": false,
                                    "message": "=string.concat($error.activity,\" - \",$error.message, \" - \", $error.data)"
                                }
                            }
                        }
                    ],
                    "links": []
                },
                "metadata": {
                    "input": [],
                    "output": [],
                    "fe_metadata": {}
                }
            }
        }
    ],
    "properties": [
        {
            "name": "Messaging.TCM-productSolutions.Connection_URL",
            "type": "string",
            "value": "wss://01esnqmkrq3kdr810wjmxqcpzw-apps.messaging.cloud.tibco.com/channel"
        },
        {
            "name": "Messaging.TCM-productSolutions.Authentication_Key",
            "type": "string",
            "value": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJnc2JjIjoiMDFFU05RTUtSUTNLRFI4MTBXSk1YUUNQWlciLCJpYXQiOjE2MTEyMjQ3MjEsInN1YiI6IjQ4MTNiYTE1YTk2MTQ5YWJiMTE1YmIwNjBhYTZiMzVmIn0.Hmx5fstDLDXXDzaZHN71e3atutHX4Gbz3HQlMxFZE-wQtPLhl4ce0ry_ZV_l6tO1k6pTAb8rrA1V3a3wvmGfZzjtRMXI4eAVPfv7H6wEU98G7XR3YKQtNpV5HPu1SzpRdYmj45j9VDF5ObgN9Z93Bm-w0UK90B60fQDhvJlbg2RD1yXI1v6gKbAi76px0_9JDb7_4eL9Ng8ltBacWiZxizlAp18Y8kiGq8kvEuteyRbPKUHxDqWGeJcIa4yYz5RpjkSIQ0lituLtceFTuYSPvmwk9EbBER_hIwG3SUjlOJp_lxZpY7hHV00O7lhqvfLbGqxubECuUc35hjk7kMSp0w"
        },
        {
            "name": "Messaging.TCM-productSolutions.Timeout",
            "type": "float64",
            "value": 10
        },
        {
            "name": "Messaging.TCM-productSolutions.AutoReconnectAttempts",
            "type": "float64",
            "value": 25
        },
        {
            "name": "Messaging.TCM-productSolutions.AutoReconnectMaxDelay",
            "type": "float64",
            "value": 5
        },
        {
            "name": "MySQL.GearHost-mySQL.Host",
            "type": "string",
            "value": "den1.mysql3.gear.host"
        },
        {
            "name": "MySQL.GearHost-mySQL.Port",
            "type": "float64",
            "value": 3306
        },
        {
            "name": "MySQL.GearHost-mySQL.Database_Name",
            "type": "string",
            "value": "gtfscontroldb"
        },
        {
            "name": "MySQL.GearHost-mySQL.User",
            "type": "string",
            "value": "gtfscontroldb"
        },
        {
            "name": "MySQL.GearHost-mySQL.Password",
            "type": "string",
            "value": "SECRET:GZ1ydxAl2EGovfdds/PwmO7PSgkwBNgtzg=="
        },
        {
            "name": "MySQL.GearHost-mySQL.Maximum_Open_Connections",
            "type": "float64",
            "value": 0
        },
        {
            "name": "MySQL.GearHost-mySQL.Maximum_Idle_Connections",
            "type": "float64",
            "value": 2
        },
        {
            "name": "MySQL.GearHost-mySQL.Maximum_Connection_Lifetime",
            "type": "string",
            "value": 0
        },
        {
            "name": "TCM_Destinations._caseCreated",
            "type": "string",
            "value": "SydneyBuses_caseCreated"
        },
        {
            "name": "LA_details.ClientID",
            "type": "string",
            "value": "2Vr7jsCBot4qVk6m2I5That7APS23PZUv9HuoJNESeM7J9uDt6KxJnoPGMsb5iwh8LwZ2FdDv6YAuGB43RwMI5htsyKC7mESwM5Z"
        },
        {
            "name": "LA_details.Email",
            "type": "string",
            "value": "mpandav@tibco.com"
        },
        {
            "name": "LA_details.TenantId",
            "type": "string",
            "value": "bpm"
        },
        {
            "name": "LA_details.Password",
            "type": "string",
            "value": "SECRET:oFZJ30SrkwnkV41f2uOguwI434U="
        },
        {
            "name": "TCM_Destinations._incidentDataStream",
            "type": "string",
            "value": "SydneyBuses_incidentStream"
        },
        {
            "name": "TCM_Destinations.authKey",
            "type": "string",
            "value": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJnc2JjIjoiMDFFU05RTUtSUTNLRFI4MTBXSk1YUUNQWlciLCJpYXQiOjE2MTA1NDcwNjEsInN1YiI6IjQ4MTNiYTE1YTk2MTQ5YWJiMTE1YmIwNjBhYTZiMzVmIn0.e_i7hupVi8_AI-ZDLPYdsESuFWHuNWu0oMTsepmpuihL9c229JJ9NIFUiDIRY928c_8v191Jl3wM3Avnw9LXYGdd2kUOyEcpAzht_n1CwWAMwgRvhdgjl4yziHGtTuzQNux4IXRTqe332R_TmMZbcWdrHnmkk17NrepeUr2_zknr_sENffIGlagTBtaLdA7TiBCD3iXkhAj-7u45L-4JOQJJQwbDGz6L2kM2XGqTRJranfFPANTRbvr-TrI1jg9a3S3TtfnFlQIfGq_6Orb-BDLilUjf1sO0G0Csoqcj8I-WN-jw7f_MbTplEcBc3I6bVG_liESyCc255Z_ipr9-kA"
        },
        {
            "name": "TCM_Destinations.DTVD_caseCreated",
            "type": "string",
            "value": "DeptTransportVictoria_caseCreated"
        },
        {
            "name": "TCM_Destinations.DTVD_incidentDataStream",
            "type": "string",
            "value": "DTVD_incidentDataStream"
        },
        {
            "name": "TCM_Destinations.TCM_URL",
            "type": "string",
            "value": "https://01esnqmkrq3kdr810wjmxqcpzw-apps.messaging.cloud.tibco.com/channel/v1/publish/"
        },
        {
            "name": "LA_details.Liveapps_region_url_",
            "type": "string",
            "value": "https://liveapps.cloud.tibco.com"
        },
        {
            "name": "LA_details.Liveapps_App_ID",
            "type": "string",
            "value": "4785"
        },
        {
            "name": "LA_details.Liveapps_DTVD_APP_ID",
            "type": "string",
            "value": "4941"
        },
        {
            "name": "Incident_Stream_Config.Time_Interval",
            "type": "float64",
            "value": 2
        }
    ],
    "schemas": {
        "mp_CaseStructure": {
            "type": "json",
            "value": "{\n    \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"start_time\": {\n            \"type\": \"string\"\n        },\n        \"description_text\": {\n            \"type\": \"string\"\n        },\n        \"header_text\": {\n            \"type\": \"string\"\n        },\n        \"url\": {\n            \"type\": \"string\"\n        },\n        \"cause\": {\n            \"type\": \"string\"\n        },\n        \"effect\": {\n            \"type\": \"string\"\n        },\n        \"severity_level\": {\n            \"type\": \"string\"\n        },\n        \"informed_entity\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"agencyId\": {\n                    \"type\": \"string\"\n                },\n                \"routeId\": {\n                    \"type\": \"string\"\n                },\n                \"stopId\": {\n                    \"type\": \"string\"\n                }\n            }\n        }\n    }\n}",
            "fe_metadata": "{\n    \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"string\"\n        },\n        \"start_time\": {\n            \"type\": \"string\"\n        },\n        \"description_text\": {\n            \"type\": \"string\"\n        },\n        \"header_text\": {\n            \"type\": \"string\"\n        },\n        \"url\": {\n            \"type\": \"string\"\n        },\n        \"cause\": {\n            \"type\": \"string\"\n        },\n        \"effect\": {\n            \"type\": \"string\"\n        },\n        \"severity_level\": {\n            \"type\": \"string\"\n        },\n        \"informed_entity\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"agencyId\": {\n                    \"type\": \"string\"\n                },\n                \"routeId\": {\n                    \"type\": \"string\"\n                },\n                \"stopId\": {\n                    \"type\": \"string\"\n                }\n            }\n        }\n    }\n}"
        }
    },
    "connections": {
        "a4b802a0-5bd0-11eb-b757-2f743e3ae7c9": {
            "id": "a4b802a0-5bd0-11eb-b757-2f743e3ae7c9",
            "name": "TCM-productSolutions",
            "ref": "#tcm",
            "isGlobal": true,
            "settings": {
                "name": "TCM-productSolutions",
                "description": "",
                "url": "=$property[\"Messaging.TCM-productSolutions.Connection_URL\"]",
                "authKey": "=$property[\"Messaging.TCM-productSolutions.Authentication_Key\"]",
                "timeout": "=$property[\"Messaging.TCM-productSolutions.Timeout\"]",
                "autoReconnectAttempts": "=$property[\"Messaging.TCM-productSolutions.AutoReconnectAttempts\"]",
                "autoReconnectMaxDelay": "=$property[\"Messaging.TCM-productSolutions.AutoReconnectMaxDelay\"]"
            }
        },
        "72faaa20-62cd-11eb-b475-57a9b84b5447": {
            "id": "72faaa20-62cd-11eb-b475-57a9b84b5447",
            "name": "GearHost-mySQL",
            "ref": "#connection",
            "isGlobal": true,
            "settings": {
                "name": "GearHost-mySQL",
                "description": "",
                "host": "=$property[\"MySQL.GearHost-mySQL.Host\"]",
                "port": "=$property[\"MySQL.GearHost-mySQL.Port\"]",
                "databaseName": "=$property[\"MySQL.GearHost-mySQL.Database_Name\"]",
                "user": "=$property[\"MySQL.GearHost-mySQL.User\"]",
                "password": "=$property[\"MySQL.GearHost-mySQL.Password\"]",
                "maxopenconnection": "=$property[\"MySQL.GearHost-mySQL.Maximum_Open_Connections\"]",
                "maxidleconnection": "=$property[\"MySQL.GearHost-mySQL.Maximum_Idle_Connections\"]",
                "connmaxlifetime": "=$property[\"MySQL.GearHost-mySQL.Maximum_Connection_Lifetime\"]",
                "onprem": false,
                "tlsconfig": false,
                "tlsparam": "Required",
                "cacert": "",
                "clientcert": "",
                "clientkey": "",
                "validatecert": false
            }
        }
    },
    "contrib": "W3sicmVmIjoiZ2l0LnRpYmNvLmNvbS9naXQvcHJvZHVjdC9pcGFhcy93aS1jb250cmliLmdpdC9jb250cmlidXRpb25zL0dlbmVyYWwiLCJzM2xvY2F0aW9uIjoiVGliY28vR2VuZXJhbCJ9LHsicmVmIjoiZ2l0LnRpYmNvLmNvbS9naXQvcHJvZHVjdC9mbG9nby1tZXNzYWdpbmcuZ2l0L01lc3NhZ2luZyIsInMzbG9jYXRpb24iOiJUaWJjby9NZXNzYWdpbmcifSx7InJlZiI6ImVtZWEtc3dpLXN2bi5lbWVhLnRpYmNvLmNvbS9zdm4vQXJpZWwvdGNpLWxpdmVhcHBzL3RydW5rL0xpdmVBcHBzIiwiczNsb2NhdGlvbiI6IlRpYmNvL0xpdmVBcHBzIn0seyJyZWYiOiJnaXQudGliY28uY29tL2dpdC9wcm9kdWN0L2lwYWFzL3dpLW15c3FsLmdpdC9zcmMvYXBwL015U1FMIiwiczNsb2NhdGlvbiI6IlRpYmNvL015U1FMIn0seyJyZWYiOiJnaXRodWIuY29tL3Byb2plY3QtZmxvZ28vY29udHJpYi9hY3Rpdml0eS9yZXN0IiwiczNsb2NhdGlvbiI6IntVU0VSSUR9L0RlZmF1bHQvYWN0aXZpdHkvcmVzdCJ9XQ==",
    "fe_metadata": "UEsDBAoAAAAIABQ8j1KrqSRGFQAAABMAAAAIAAAAYXBwLmpzb26rViopykxPTy1yy8kvL1ayio6tBQBQSwECFAAKAAAACAAUPI9Sq6kkRhUAAAATAAAACAAAAAAAAAAAAAAAAAAAAAAAYXBwLmpzb25QSwUGAAAAAAEAAQA2AAAAOwAAAAAA"
}